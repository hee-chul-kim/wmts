이 장에서는 **클라이언트가 서버로부터 요청할 수 있는 WMTS 리소스**에 대해 설명합니다.  
리소스는 다음 두 가지 아키텍처 스타일 중 하나를 통해 요청할 수 있습니다:

- 🧭 **절차 지향적 아키텍처 스타일 (Procedure Oriented Architectural Style)**
- 🌐 **리소스 지향적 아키텍처 스타일 (Resource Oriented Architectural Style)**

또한 절차 지향적 스타일에서의 **연산(operations)**도 추상적으로 설명합니다.

- **KVP 인코딩**은 8장에서,
- **SOAP 인코딩**은 9장에서,
- **리소스 지향적 설명 및 RESTful 구현**은 10장에서 다룹니다.

---

## 7.1 서비스 메타데이터 (Service Metadata)

이 절에서는 **ServiceMetadata 문서**와 이를 **절차 지향적 스타일** 또는 **리소스 지향적 스타일**로 **어떻게 얻을 수 있는지**에 대해 설명합니다.

---

### 7.1.1 ServiceMetadata 문서란?

`ServiceMetadata` 문서는 다음과 같은 요청의 응답으로 반환되는 문서입니다:

- 절차 지향적 스타일 → `GetCapabilities` 요청
- 리소스 지향적 스타일 → 적절한 엔드포인트에 대한 표준 요청

📌 이 문서는 서비스에서 **사용 가능한 리소스**와 **서비스와의 통신 요구 사항**을 표현하는 **진입점 리소스(entry point resource)**입니다.

---

### 7.1.1.1 ServiceMetadata 문서 설명

`ServiceMetadata` 문서는 **Table 2**에 지정된 모든 섹션을 포함합니다. 그러나 전체 문서가 아닌, **일부 섹션만 포함하는 부분 문서**도 요청할 수 있습니다.

절차 지향적 스타일의 `GetCapabilities` 요청에서 `Sections` 매개변수(parameter)의 값에 따라 요청자는 하나 이상의 섹션을 조합하여 요청할 수 있습니다.

💡 **요청한 경우, 서비스는 반드시 해당 섹션을 반환해야 합니다.** 단, 서비스가 **ServiceMetadata 문서의 하위 섹션 요청을 지원하지 않는 경우**는 예외입니다.

![[Pasted image 20250410092954.png]]

| 섹션 이름             | 내용 설명                                                                                                                                                                                |
| --------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ServiceIdentification | 이 서버에 대한 메타데이터. 이 섹션의 스키마는 모든 OWS와 동일해야 하며, OWS Common [OGC 06-121r3]의 7.4.3절과 `owsServiceIdentification.xsd`에 정의됨.                                   |
| ServiceProvider       | 이 서버를 운영하는 조직에 대한 메타데이터. 이 섹션의 스키마는 모든 OWS와 동일해야 하며, OWS Common [OGC 06-121r3]의 7.4.4절과 `owsServiceProvider.xsd`에 정의됨.                         |
| OperationsMetadata    | 이 서비스가 구현한 절차 지향 아키텍처 스타일의 작업에 대한 메타데이터. 요청 URL 등을 포함하며, OWS Common [OGC 06-121r3]의 7.4.5절과 `owsOperationsMetadata.xsd`에 정의된 구성과 동일함. |
| Contents              | 이 서버가 제공하는 데이터에 대한 메타데이터. WMTS의 경우, 이 섹션은 레이어와 `TileMatrixSet`에 대한 정보를 포함해야 하며, 아래의 표 5~14에 정의됨.                                       |
| Themes                | 레이어에 대한 주제 계층 구조를 설명하는 메타데이터. 표 15와 16에 정의됨.                                                                                                                 |

**ServiceIdentification** 및 **ServiceProvider** 섹션은 OWS Common [OGC 06-121r3]의 하위 절 **7.4.4** 및 **7.4.5**에서 설명되어 있습니다.  
**OperationsMetadata**, **Contents**, **Themes** 섹션은 본 문서의 하위 절 **7.1.2.1**, **7.1.2.2**, **7.1.2.3**에서 설명되어 있습니다.  
이러한 섹션들 외에도, 각 서비스 메타데이터 문서는 필수적인 `"version"` 파라미터를 포함해야 하며,  
선택적으로 `"updateSequence"` 파라미터를 포함할 수 있습니다.  
이 파라미터들은 OWS Common [OGC 06-121r3]의 하위 절 **7.4.2**의 **표 9**에 정의되어 있으며, 해당 표는 본 문서에도 복사되어 있습니다.

마지막으로, `"WSDL"` 및 `"serviceMetadataURL"` 파라미터는 특정 인코딩을 사용하는 서버에서만 필요합니다.

### ✅ ServiceMetadata 전체 구성요소 요약표

| 이름                      | 정의                                                                 | 데이터 타입 및 값                                                                                     | 사용 수 및 조건                                             |
| ------------------------- | -------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------- | ----------------------------------------------------------- |
| **version**               | 작업(예: GetCapabilities 응답)의 표준 버전                           | 문자 문자열 형식, 비어 있지 않아야 함 <br>값은 `x.y.z` 형식의 `"version"` 목록 <br>**반드시 "1.0.0"** | **1개 (필수)**                                              |
| **updateSequence**        | 서비스 메타데이터 문서의 버전 <br>변경 시마다 증가                   | 문자 문자열 형식, 비어 있지 않아야 함 <br>값은 서버가 결정하며 클라이언트에게는 불투명함              | 0 또는 1개 (선택사항) <br>지원하지 않으면 생략 가능         |
| **WSDL**                  | WSDL 리소스에 대한 참조                                              | URL 형식                                                                                              | 0개 이상 (선택사항) <br>**SOAP 인코딩 사용 시에만 필요**    |
| **serviceMetadataURL**    | ServiceMetadata 리소스에 대한 참조                                   | URL 형식                                                                                              | 0개 이상 (선택사항) <br>**리소스 지향 아키텍처에서는 필수** |
| **serviceIdentification** | 이 특정 서버에 대한 메타데이터                                       | `ServiceIdentification` 섹션 참조 <br>OWS Common [OGC 06-121r3]의 표 11                               | 0 또는 1개 (선택사항)                                       |
| **serviceProvider**       | 서버를 운영하는 조직에 대한 메타데이터                               | `ServiceProvider` 섹션 참조 <br>OWS Common [OGC 06-121r3]의 표 12                                     | 0 또는 1개 (선택사항)                                       |
| **operationsMetadata**    | 이 서비스에서 정의된 작업들에 대한 메타데이터                        | `OperationsMetadata` 섹션 참조 <br>OWS Common [OGC 06-121r3]의 표 13                                  | 0 또는 1개 (선택사항)                                       |
| **contents**              | 서버가 제공하는 데이터(레이어, 타일 매트릭스 세트)에 대한 메타데이터 | `Contents` 섹션 참조 (이 문서의 표 5)                                                                 | 0 또는 1개 (선택사항)                                       |
| **themes**                | 레이어의 테마 계층 구조를 설명하는 메타데이터                        | `Themes` 섹션 참조 (이 문서의 표 15)                                                                  | 0개 이상 (선택사항)                                         |

"version" 및 "updateSequence" 파라미터는 OWS Common [OGC 06-121r3]의 부절 7.4.2에 설명되어 있습니다. "WSDL" 및 "serviceMetadataURL" 파라미터는 이 문서의 부록 F2 및 부절 10.1.1에 설명되어 있습니다.

### 7.1.1.1.1 OperationsMetadata 섹션 내용

**OperationsMetadata** 섹션은 OGC 웹 서비스 전반에서 동일하며,  
이는 OWS Common [OGC 06-121r3]의 부절 7.4.6 및 `owsOperationsMetadata.xsd`에 명시되어 있습니다.  
이 섹션은 **절차 지향 아키텍처 스타일**에서만 관련이 있습니다.

파라미터들은 아래 **표 4**에 명시되어 있으며,  
표 4의 "Name(이름)" 열은 **점(dot) 구분자 표기법**을 사용하여 상위 항목의 일부를 식별합니다.  
"Value(값)" 열은 **operation 파라미터**(이 경우, operation 이름)를 참조하며,  
해당 값을 포함하는 것이 의미하는 바는 오른쪽 열에 설명되어 있습니다.

**Table 4 — Values of OperationsMetadata section parameters**

| 이름 (Name)      | 값 (Value)        | 파라미터 값의 의미 (Meaning of parameter value)                |
| ---------------- | ----------------- | -------------------------------------------------------------- |
| `Operation.name` | `GetCapabilities` | 이 서버가 `GetCapabilities` 작업을 구현하고 있음을 나타냅니다. |
|                  | `GetTile`         | 이 서버가 `GetTile` 작업을 구현하고 있음을 나타냅니다.         |
|                  | `GetFeatureInfo`  | 이 서버가 `GetFeatureInfo` 작업을 구현하고 있음을 나타냅니다.  |

표 4에 나열된 값 외에도, **`OperationsMetadata`** 섹션에는 많은 선택적인 `"Name"` 속성과 `"Value"` 매개변수 값이 있으며, 필요하다고 판단되는 경우 포함될 **수 있습니다 (MAY)**. 이러한 속성과 매개변수 대부분은 다양한 작업 매개변수와 수치의 도메인을 기록하기 위한 것입니다.

`Operation` 데이터 타입은 **분산 컴퓨팅 플랫폼(DCP)** 매개변수와, 이를 **DCP 매개변수 내의 제약 조건(Constraint)** 으로 인코딩하는 것을 명시할 수 있습니다.

**HTTP를 사용하는 절차 지향 아키텍처 스타일**의 모든 WMTS 서버는 **ows:Constraint** 파라미터를 통해 **HTTP GET 또는 HTTP POST를 사용하여 전송 가능한 인코딩 방식**을 명시해야 합니다 (**SHALL**). 각 작업(Operation)은 하나 이상의 인코딩 방식을 지원할 수 있으며, 작업마다 지원하는 인코딩의 집합이 다를 수 있습니다 (그러나 이는 일반적으로 기대되지 않으므로 **권장되지 않습니다**).

또한, **HTTP GET 요청**을 통해 전송될 수 있는 메시지 인코딩 방식을 명시해야 합니다. 구체적으로 `"GetEncoding"`을 `"name"` 속성 값으로 가지는 **ows:Constraint** 파라미터를 포함하는 것이 좋습니다 (**SHOULD**). 허용되는 값은 다음과 같습니다:

- `"KVP"`: 8절에 정의된 대로, HTTP GET 방식에서 **Key-Value Pair(KVP)** 인코딩을 허용함을 나타냅니다.

또한, **HTTP POST 요청**을 통해 전송될 수 있는 메시지 인코딩 방식도 명시해야 합니다 (**SHALL**). 이 경우 `"PostEncoding"`을 `"name"` 속성 값으로 가지는 **ows:Constraint** 파라미터를 반드시 포함해야 하며, 허용 가능한 값은 다음과 같습니다:

a) `"SOAP"`: 9절에 정의된 대로, **SOAP 인코딩**을 허용함을 나타냅니다.  
b) `"XML"`: **SOAP 메시지 래핑 없이 XML 인코딩**을 허용함을 나타냅니다.  
c) `"KVP"`: **HTTP POST 방식에서도 KVP 인코딩**을 허용함을 나타냅니다.

만약 작업 요청의 인코딩 방식에 따라 HTTP 연결 지점 URL이 다르다면, 각 GET 또는 POST 섹션 내에 해당 URL을 **ows:Constraint** 파라미터로 명시해야 합니다. 만약 모든 작업 요청의 모든 인코딩 방식에 대해 같은 URL을 사용한다면, 이 URL은 **OperationsMetadata** 섹션에 명시해야 합니다.

이 절에서 제시된 제약 조건 이름(name)과 값(value)은 단순한 예시가 아니라, 실제로 반드시 사용되어야 할 정확한 이름과 값입니다 (**SHALL**).

**리소스 지향 아키텍처 스타일**의 HTTP 인코딩은 **OperationsMetadata** 섹션에 기술되어서는 안 됩니다 (**SHALL NOT**). 대신, **리소스 지향 아키텍처 스타일**로 운영되는 서버가 제공하는 서비스 메타데이터 문서에는 해당 스타일을 지원함을 나타내기 위해 **ResourceURL** 및 **ServiceMetadataURL**이 사용되어야 합니다. 이에 대한 설명은 10절에 나와 있습니다.

### 7.1.1.1.2 Contents 섹션 내용

**ServiceMetadata 문서의 Contents 섹션**은 해당 서버에서 제공하는 **데이터에 대한 메타데이터**를 포함합니다.  
WMTS의 경우, 이 Contents 섹션은 **사용 가능한 레이어에 대한 일반적인 설명**, 그리고 **각 레이어에 적용되는 추가 차원(extra dimensions), 스타일(styles), 이미지 포맷(image formats), 타일 매트릭스 세트(tile matrix sets)**에 대한 설명을 포함합니다.

**Contents 섹션은 반드시(Table 5부터 Table 14까지에 지정된) 파라미터들을 포함해야 합니다** (**SHALL**).

## ![[Pasted image 20250408171241.png]]

**Table 5부터 Table 12까지는 ServiceMetadata 문서의 *레이어(layer) 섹션*을 구성하는 요소들을 정의하며, Table 13과 Table 14는 *타일 매트릭스 세트(tile matrix set) 섹션*의 구성 요소들을 정의합니다.**  
Figure 5에 제시된 UML 클래스 다이어그램은 Contents 섹션의 구성 요소들을 시각적으로 잘 보여줍니다.

**Contents 섹션(Table 5에서 설명됨)**은 서버에서 사용 가능한 **레이어 목록**과 **tileMatrixSet 목록**을 포함합니다.  
각 레이어는 특정 tileMatrixSet에 대한 참조를 통해 연결됩니다 (tileMatrixSet 식별자 참조 사용).

**레이어는 Table 6에 따라 다음 항목들로 설명됩니다**:

- 이름(name),
- 제목(title),
- 요약 설명(abstract description),
- 키워드(keywords),
- WGS84BoundingBox,
- tileMatrixSet 참조,
- 지원하는 이미지 포맷 목록(supported image format list),
- infoFormat 목록,
- 메타데이터 문서 URL 링크(metadata URL document link),
- (선택적으로) 차원 목록(dimensions list).

또한, **각 레이어는 하나 이상의 스타일(styles)** 을 가지며, 이는 **지도 표현(map portrayal representation)** 방식입니다.  
**각 스타일은 Table 7에 따라 다음 항목들로 구성된 Style 섹션으로 설명됩니다**:

- 이름(name),
- 제목(title),
- 요약 설명(abstract),
- legendURL 목록 (Table 8에서 설명됨).

**각 legendURL**은 해당 스타일에 대한 **아이콘 형태의 표현**을 제공하며, 이는 범례(legend)에 표시하기 적합한 이미지입니다.  
해당 항목은 이미지 아이콘의 URL을 명시하고, 선택적으로 **이미지의 너비(width) 및 높이(height)**, 그리고 **해당 아이콘이 적합한 축척 범위(scale range)**를 포함할 수 있습니다 (Table 8 참조).

**레이어의 선택적 차원 정보**는 Table 9에 설명되어 있으며,  
각 차원은 다음과 같은 항목들로 구성됩니다:

- 식별자(identifier),
- 제목(title),
- 요약 설명(abstract),
- 단위(units) 및 단위 기호(unit symbols),
- 가능한 값 목록(list of possible values),
- 기본값(default value).

**대표적인 차원 식별자**로는 `"time"`, `"elevation"`, `"band"` 등이 있으며,  
서비스는 제공 중인 다차원 레이어 컬렉션 내에 존재하는 **기타 사용자 정의 차원 속성**도 정의할 수 있습니다.

**Table 5 — Contents 섹션 구성 요소**

| 이름 (Names)      | 정의 (Definition)                                          | 데이터 유형 및 값 (Data type and values)  | 개수 및 사용 (Multiplicity and use)                             |
| ----------------- | ---------------------------------------------------------- | ----------------------------------------- | --------------------------------------------------------------- |
| **layer**         | 이 서버에서 제공하는 **최상위 데이터셋**에 대한 메타데이터 | Layer 데이터 구조, Table 6 참조           | 0개 이상 (선택 사항) <br>데이터셋 하나당 하나씩 존재해야 함 [a] |
| **otherSource**   | 다른 **메타데이터 소스**에 대한 참조                       | ISO 19115의 CI_OnlineResource 클래스 참조 | 0개 이상 (선택 사항)                                            |
| **tileMatrixSet** | **타일 분할의 기하학적 구조**에 대한 설명                  | TileMatrixSet 데이터 구조, Table 13 참조  | 0개 이상 (선택 사항)                                            |

> **a**: `layer` 항목은 **반드시 포함되어야 하며**, 단 **otherSource** 파라미터가 포함되어 있고, **모든 메타데이터가 그 외부 소스에서 제공되는 경우**에는 생략할 수 있습니다.

`OtherSource` 매개변수는 하나 이상의 카탈로그 서버(catalogue servers)를 참조할 수 있으며, 이를 통해 데이터셋의 메타데이터에 접근할 수 있습니다. 이 기능은 매우 많은 수의 데이터셋을 제공하는 서버에서 유용하게 사용될 것으로 예상되며, 이러한 경우에는 방대한 `ServiceMetadata` XML 문서를 가져와 검색하는 것보다, 카탈로그에서 검색하는 것이 더 효율적입니다.

`ServiceMetadata` 문서의 `Contents` 섹션에 `Layer` 섹션이 없는 경우, `otherSource` 매개변수는 현재 WMTS 서버에서 제공하는 모든 데이터셋의 최신 메타데이터 요약을 포함하는 하나 이상의 카탈로그 서버를 참조해야 하며(`SHALL`), 각 데이터셋의 메타데이터는 이 WMTS 서버를 참조해야 합니다.

그림 6의 UML 클래스 다이어그램은 `Layer` 섹션의 속성, 복합 데이터 타입 및 의존성을 시각적으로 보여주는 유용한 그래픽 표현을 제공합니다.

![[Pasted image 20250410093911.png]]

### 표 6 — Layer 데이터 구조의 구성 요소

| 이름                                             | 정의                                                                                      | 데이터 타입 및 값                                             | 사용 횟수 및 조건                                                                               |
| ------------------------------------------------ | ----------------------------------------------------------------------------------------- | ------------------------------------------------------------- | ----------------------------------------------------------------------------------------------- |
| **identifier**<br>식별자 [a]                     | 이 레이어를 고유하게 참조하는 식별자. 보통 소프트웨어 내부에서 사용됨 [f]                 | `ows:CodeType`, ISO 19115의 `MD_Identifier` 클래스에서 파생   | **1개 필수**<br>※ 서버 내 모든 레이어에서 고유해야 함                                           |
| **title** [c]<br>제목                            | 사람에게 보여주기 위한 이 레이어의 제목                                                   | `LanguageString` 구조(OWS Common [OGC 06-121r3] 그림 15 참조) | **0개 이상 선택**<br>가능한 경우 포함하며, 지원되는 언어별로 하나씩 [e]                         |
| **abstract** [c]<br>요약 설명                    | 이 레이어에 대한 간략한 설명. 사람에게 표시됨                                             | `LanguageString` 구조                                         | **0개 이상 선택**<br>가능한 경우 포함하며, 지원되는 언어별로 하나씩                             |
| **keywords** [c]<br>키워드                       | 이 데이터셋을 설명하는 일반적 또는 표준화된 키워드 또는 구의 무작위 리스트                | ISO 19115의 `MD_Keywords` 클래스                              | **0개 이상 선택**<br>키워드 권한(authority)별로 하나씩 포함                                     |
| **wgs84BoundingBox**<br>WGS84 경계 상자          | 데이터셋을 둘러싼 최소 경계 사각형. WGS 84 CRS 사용. 경도→위도 순서, 소수점 좌표 사용 [b] | `WGS84BoundingBox` 데이터 구조(OWS Common 10.2절 참조)        | **0개 또는 1개 선택**※ <br>가능하면 정확하게 제공                                               |
| **boundingBox**<br>경계 상자                     | 지원되는 CRS로 표현된 레이어의 최소 경계 사각형 [g]                                       | `BoundingBox` 구조(OWS Common 10.2절 참조)                    | **0개 이상 선택**※ tileMatrixSet 경계와 중복처럼 보일 수 있지만 실제 데이터 영역과 다를 수 있음 |
| **style**<br>스타일                              | 이 레이어에 적용된 스타일에 대한 설명                                                     | `Style` 구조 (표 7 참조)                                      | **1개 이상 필수**                                                                               |
| **format**<br>형식                               | 타일 요청을 위한 지원되는 출력 포맷                                                       | `ows:MimeType`                                                | **1개 이상 필수**                                                                               |
| **infoFormat**<br>정보 형식                      | `FeatureInfo` 요청을 위한 지원되는 출력 포맷                                              | `ows:MimeType`                                                | **0개 이상 선택** [d]                                                                           |
| **dimension**<br>차원                            | 타일 및 `FeatureInfo` 요청에 대한 추가 차원                                               | `Dimension` 구조 (표 9 참조)                                  | **0개 이상 선택**<br>사용 가능한 추가 차원별로 하나씩                                           |
| **metadata**<br>메타데이터                       | 이 데이터셋에 대한 추가 메타데이터                                                        | `ows:Metadata`                                                | **0개 이상 선택**<br>유용한 메타데이터 객체별로 하나씩                                          |
| **tileMatrixSetLink**<br>타일 매트릭스 세트 링크 | 타일 매트릭스 세트 및 그 제한사항에 대한 참조                                             | `TileMatrixSetLink` 구조 (표 10 참조)                         | **1개 이상 필수**                                                                               |
| **resourceURL**<br>자원 URL                      | 타일 또는 `FeatureInfo` 자원에 대한 URL 템플릿                                            | `URLTemplate` 구조 (표 31 참조)                               | **0개 이상 선택**※ <br>리소스 지향 아키텍처 스타일에서 하나 이상 포함 권장                      |

- a: WMS의 "name"과 의미가 같지만 OWS Common과의 일관성을 위해 "identifier"로 변경됨
- b: `wgs84BoundingBox`는 근사치일 수 있으나 가능하면 정밀하게 제공해야 함
- c: 다국어 범위 규칙은 OWS Common 10.7.3절을 따름
- d: `infoFormat`이 없으면 FeatureInfo 요청이 불가함
- e: `title`이 없으면 클라이언트는 `identifier`를 대신 표시할 수 있음
- f: 모든 레이어의 `identifier`는 고유해야 함
- g: `boundingBox`는 tileMatrixSet 경계 상자와 겹치는 것처럼 보일 수 있지만, 실제 데이터가 존재하는 영역을 정확히 표현하기 위해 필요함

---

출력 포맷(output formats)의 목록은 **신중하게 선택해야 합니다**. 포맷 목록이 길면 클라이언트와의 상호운용성(interoperability)은 향상되지만, **캐시 메커니즘의 효율성은 감소**하게 됩니다. 일반적인 원칙으로, 서버는 **짧은 포맷 목록을 사용하는 것이 좋으며**, **중복된 포맷은 포함하지 말고**, **11.3절에서 권장하는 포맷들을 우선적으로 사용하는 것이 바람직**합니다.

> **참고 1:**  
> WMTS에서는 **레이어마다 지원하는 출력 포맷의 목록이 다를 수 있습니다**.  
> 이는 모든 레이어에 대해 동일한 포맷 목록을 사용하는 WMS와는 다릅니다.  
> WMTS에서는 각 레이어의 특성에 따라 **최적의 포맷이 다를 수 있기 때문에**, 이와 같은 유연성이 부여된 것입니다.  
> 만약 모든 레이어에 대해 공통 포맷 목록을 사용한다면, **모든 레이어가 모든 포맷을 지원해야 하므로**,  
> 확장성과 성능이 저하될 수 있습니다.

> **참고 2:**  
> 부록 C4에 포함된 UML 클래스 다이어그램은 표 6~16에 나열된 Contents 섹션의 내용을 **시각적으로 이해하는 데 유용한 그래픽 표현**을 제공합니다.

---

### 📘 표 7 — Style 데이터 구조의 구성 요소

| 이름                          | 정의                                                                                                   | 데이터 타입 및 값                                             | 사용 횟수 및 조건                                                                                       |
| ----------------------------- | ------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- |
| **identifier**<br>식별자 [a]  | 이 스타일을 고유하게 참조하는 식별자. 필요한 경우 특정 버전도 식별하며, 주로 소프트웨어에서 사용됨 [d] | `ows:CodeType`(ISO 19115의 `MD_Identifier` 클래스에서 파생)   | **1개 필수**<br>※ 동일 레이어 내에서 고유해야 함                                                        |
| **title**<br>제목 [b]         | 사람에게 보여주기 위한 스타일의 제목                                                                   | `LanguageString` 구조(OWS Common [OGC 06-121r3] 그림 15 참조) | **0개 이상 선택**<br>가능하면 포함하며, 언어별로 하나씩 제공 [c]                                        |
| **abstract**<br>요약 설명 [b] | 이 스타일에 대한 간단한 설명. 보통 사용자에게 보여줌                                                   | `LanguageString` 구조                                         | **0개 이상 선택**<br>가능하면 포함하며, 언어별로 하나씩 제공                                            |
| **keywords**<br>키워드 [b]    | 이 스타일을 설명하는 일반적이거나 표준화된 단어 또는 구절의 무작위 리스트                              | ISO 19115의 `MD_Keywords` 클래스                              | **0개 이상 선택**<br>키워드 권한(authority)별로 하나씩 포함                                             |
| **legendURL**<br>범례 URL     | 이 스타일의 지도를 설명하는 **범례 이미지**에 대한 설명                                                | `LegendURL` 구조(표 8 참조)                                   | **0개 이상 선택**<br>가능하면 포함                                                                      |
| **isDefault**<br>기본 여부    | 클라이언트가 기본적으로 선택해야 할 스타일인지 여부                                                    | Boolean (불리언)                                              | **0개 또는 1개 선택**<br>기본값은 `false`※ 하나의 레이어에 `true`를 가진 스타일은 **하나만 허용됨** [e] |

- a: WMS의 `"name"`과 동일한 의미이나, OWS Common과의 일관성을 위해 `"identifier"`로 변경됨
- b: 다국어 사용 규칙은 OWS Common 10.7.3절을 따름
- c: `title`이 없는 경우, 클라이언트는 `identifier` 값을 대신 표시할 수 있음
- d: 하나의 레이어에 속한 스타일들은 고유한 `identifier` 값을 가져야 함
- e: `isDefault = true`로 지정할 수 있는 스타일은 **레이어당 하나만** 허용됨

---

WMTS `ServiceMetadata` 문서에는 **하나 이상의 `LegendURL` 요소**를 포함할 수 있으며,  
이는 **레이어의 각 스타일에 관련된 범례 이미지**를 제공합니다. 클라이언트는 이 이미지를 사용자에게 보여줌으로써, **타일에 표현된 정보의 시각적 요약**을 제공할 수 있습니다. 이 범례 이미지는 타일 표현에 사용된 **기호, 선, 색상의 의미를 명확하게 나타내야 하며**, 사용자가 이를 쉽게 이해할 수 있도록 해야 합니다.
또한, **범례 이미지에는 레이어의 제목을 중복해서 텍스트로 포함해서는 안 됩니다**. 이 정보는 이미 클라이언트가 알고 있으며, **다른 방식으로 사용자에게 표시될 수 있기 때문입니다**.

### 📘 표 8 — `LegendURL` 데이터 구조 구성 요소

| 이름                                      | 정의                                                              | 데이터 타입 및 값           | 사용 조건                              |
| ----------------------------------------- | ----------------------------------------------------------------- | --------------------------- | -------------------------------------- |
| **format**<br>포맷                        | 범례 이미지의 지원되는 출력 포맷                                  | `ows:MimeType`              | **1개 필수**                           |
| **minScaleDenominator**<br>최소 축척 분모 | 이 범례 이미지가 **유효한 최소 축척 분모** (이 값 이상일 때 유효) | `Double` (비어있으면 안 됨) | **0개 또는 1개 선택**가능하면 포함 [a] |
| **maxScaleDenominator**<br>최대 축척 분모 | 이 범례 이미지가 **유효한 최대 축척 분모** (이 값 미만일 때 유효) | `Double` (비어있으면 안 됨) | **0개 또는 1개 선택**가능하면 포함 [a] |
| **href**                                  | 범례 이미지를 가져올 수 있는 URL                                  | `URL` 타입                  | **1개 필수**                           |
| **width**<br>너비                         | 범례 이미지의 너비 (픽셀 단위)                                    | **양의 정수**               | **0개 또는 1개 선택**가능하면 포함     |
| **height**<br>높이                        | 범례 이미지의 높이 (픽셀 단위)                                    | **양의 정수**               | **0개 또는 1개 선택**가능하면 포함     |

- a: `minScaleDenominator`와 `maxScaleDenominator`는 이 범례 이미지가 **어떤 축척 범위에서 유효한지**를 정의합니다.
  - `minScaleDenominator`가 없는 경우 → 최소 축척 제한 없음 (기본값: 0)
  - `maxScaleDenominator`가 없는 경우 → 최대 축척 제한 없음 (기본값: 무한대)
  - 둘 다 없는 경우 → **모든 축척에서 유효**한 범례로 간주됨
- 축척 분모 값과 픽셀 크기의 관계는 6.1절에 설명된 일반 원칙이 여기에 동일하게 적용됩니다.

---

다차원 데이터의 경우, 서비스 메타데이터를 통해 해당 데이터의 다차원성을 기술할 수 있으며, 타일은 이러한 차원에서 특정 값들을 지정하여 요청할 수 있습니다.  
차원의 예로는 시간(Time), 고도(Elevation), 밴드(Band) 등이 있습니다.  
WMTS 서비스 메타데이터에서는 레이어에 적용 가능한 하나 이상의 차원 축에 따라 사용 가능한 값들을 선택적 파라미터로 선언할 수 있습니다.  
해당 레이어에 대한 `GetTile` 및 `GetFeatureInfo` 요청에는 차원 값들을 지정하는 파라미터가 포함되어야 합니다.

## 📘 표 9 — `Dimension` 데이터 구조 구성 요소

| 이름                         | 정의                                                                                       | 데이터 타입 및 값                                                | 사용 조건                                              |
| ---------------------------- | ------------------------------------------------------------------------------------------ | ---------------------------------------------------------------- | ------------------------------------------------------ |
| **identifier**<br>식별자 [a] | 차원의 축 이름 [e]                                                                         | `ows:CodeType` (ISO 19115의 `MD_Identifier` 기반)                | **1개 필수**                                           |
| **title**<br>제목 [b]        | 차원의 제목. 사용자에게 표시되는 이름                                                      | `LanguageString` 구조체(OWS Common의 도표 15 참고)               | **0개 이상 (선택)**각 언어별로 포함 가능 [d]           |
| **abstract**<br>요약 [b]     | 차원에 대한 간단한 설명. 사용자에게 보여주기 위함                                          | `LanguageString` 구조체 (OWS Common의 도표 15 참고)              | **0개 이상 (선택)**각 언어별로 포함 가능               |
| **keywords**<br>키워드 [b]   | 이 차원을 설명하는 단어 또는 구의 비정렬 리스트                                            | `MD_Keywords` 클래스(ISO 19115)                                  | **0개 이상 (선택)**키워드 출처별로 1개 이상            |
| **UOM**<br>단위              | 차원의 측정 단위                                                                           | `DomainMetadata` 구조체(OWS Common 도표 43 참고)                 | **0개 또는 1개 (선택)**                                |
| **unitSymbol**<br>단위 기호  | 단위를 나타내는 기호                                                                       | 문자열(비어 있으면 안 됨)                                        | **0개 또는 1개 (선택)**                                |
| **default**<br>기본값        | 타일 요청에 값이 명시되지 않았거나 키워드 'default' 사용했을 경우 사용되는 기본값          | 문자열(비어 있을 수 없음)<br>`'default'` 또는 `'current'`는 예외 | **1개 필수**                                           |
| **current**<br>현재값 여부   | `true`일 경우:① 시계열 데이터가 항상 최신이며② 요청 시 `'current'` 키워드를 사용할 수 있음 | `Boolean`기본값: `false`                                         | **0개 또는 1개 (선택)**<br>**시계열 차원일 때만 포함** |
| **value**                    | 이 차원에서 사용 가능한 값                                                                 | 문자열(비어있으면 안 됨)                                         | **1개 이상 필수**<br>모든 값에 대해 반복 가능 [c]      |

- a : 이는 WMS에서의 "name"과 동일한 의미를 가지지만, OWS Common과의 일관성을 위해 "identifier"로 대체되었습니다.
- b : OWS Common [OGC 06-121r3] 문서의 하위절 10.7.3에 명시된 다국어 범위 규칙이 적용되어야 합니다.
- c : 이 차원(dimension)에 대해 사용 가능한 각 값마다 이 매개변수를 반복해서 작성해야 합니다.
- d : Title이 지정되지 않은 경우, 클라이언트는 대신 Identifier 값을 표시할 수 있습니다.
- e : Dimension 식별자는 이 서버의 각 레이어마다 고유해야 합니다.

**참고 3** WMS의 차원(Dimension) 섹션에는 `multiValues`라는 속성이 있어, 클라이언트에게 서버가 동시에 여러 값을 요청하는 것을 지원함을 알릴 수 있습니다. 그러나 WMTS의 타일 요청에서는 이 표준에서 차원 데이터 타입에 대해 이러한 속성을 지원하지 않습니다.

---

### 📋 Table 10 — TileMatrixSetLink 데이터 구조의 구성 요소

| 이름                    | 정의                                                       | 데이터 타입 및 값                                                           | 수량 및 사용                                                                                               |
| ----------------------- | ---------------------------------------------------------- | --------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------- |
| **tileMatrixSet**       | 참조되는 타일 매트릭스 세트 이름입니다.                    | URI 타입값은 서비스 메타데이터 문서 내의 `tileMatrixSet` 식별자여야 합니다. | **1개 (필수)**                                                                                             |
| **tileMatrixSetLimits** | 이 `tileMatrixSet`에 대해 유효한 인덱스 범위를 정의합니다. | `TileMatrixSetLimits` 데이터 구조(Table 11 참조)                            | **0개 또는 1개 (선택 사항)**데이터의 범위가 `tileMatrixSet` 전체를 포함하지 않는 경우 포함해야 합니다. [a] |

> a: 데이터의 공간 범위가 해당 `tileMatrixSet`의 전체 범위를 포함하지 않는 경우, `tileMatrixSetLimits`를 명시적으로 지정하여 정확한 범위를 정의해야 합니다.

---

### 📋 Table 11 — TileMatrixSetLimits 데이터 구조의 구성 요소

| 이름                 | 정의                                                                | 데이터 타입 및 값                             | 수량 및 사용                                                          |
| -------------------- | ------------------------------------------------------------------- | --------------------------------------------- | --------------------------------------------------------------------- |
| **tileMatrixLimits** | 이 `tileMatrixSet`에 속한 각 `tileMatrix`에 대한 인덱스 제한입니다. | `TileMatrixLimits` 데이터 구조(Table 12 참조) | **1개 이상 (필수)**각 `tileMatrix`에 대해 하나씩 포함해야 합니다. [a] |

> a : 수량은 이 `tileMatrixSet`에 정의된 `tileMatrix`의 수와 일치해야 합니다.

---

### 📋 Table 12 — TileMatrixLimits 데이터 구조의 구성 요소

| 이름           | 정의                                      | 데이터 타입 및 값                      | 수량 및 사용   |
| -------------- | ----------------------------------------- | -------------------------------------- | -------------- |
| **tileMatrix** | 이 레이어에 대한 `tileMatrix` 식별자 참조 | URI 타입서비스 메타데이터에서 정의됨 a | **1개 (필수)** |
| **minTileRow** | 이 레이어에 유효한 최소 타일 행 인덱스    | 양의 정수 타입 b                       | **1개 (필수)** |
| **maxTileRow** | 이 레이어에 유효한 최대 타일 행 인덱스    | 양의 정수 타입 c                       | **1개 (필수)** |
| **minTileCol** | 이 레이어에 유효한 최소 타일 열 인덱스    | 양의 정수 타입 d                       | **1개 (필수)** |
| **maxTileCol** | 이 레이어에 유효한 최대 타일 열 인덱스    | 양의 정수 타입 e                       | **1개 (필수)** |

> a: URI는 해당 레이어의 이 `tileMatrixSet`의 `tileMatrix` 섹션을 참조하는 식별자여야 합니다.  
> b: 값의 범위는 `0`부터 `maxTileRow`까지입니다.  
> c: 범위는 `minTileRow`부터 이 `tileMatrixSet`의 `tileMatrix` 섹션에 정의된 `matrixHeight - 1`까지입니다.  
> d: 값의 범위는 `0`부터 `maxTileCol`까지입니다.  
> e: 범위는 `minTileCol`부터 `tileMatrix` 섹션의 `tileWidth - 1`까지입니다.

---

타일 행렬 집합(tileMatrixSet)은 **TopLeftCorner**, **MatrixWidth**, **MatrixHeight**를 통해 **일반적인 타일 공간의 경계 상자(bounding box)**를 정의합니다 (6절 참고).  
실용적인 이유로, 이 타일 공간을 참조하는 일부 레이어는 전체 경계 상자를 덮는 데이터가 아니라, **일부 사각형 영역만을 덮는 데이터**를 포함할 수 있습니다.  
이러한 사실을 반영하기 위해, **선택적으로 TileMatrixSetLimits**를 레이어 섹션의 설명에 포함해야 합니다.  
**도표 7(Figure 7)**에 표시된 영역 밖의 타일을 요청하는 경우, **예외 응답(exception response)**이 발생해야 합니다.
![[Pasted image 20250410102617.png]]
![[Pasted image 20250410102633.png]]

---

각 레이어는 **하나 이상의 TileMatrixSet 식별자(TileMatrixSet identifier)**를 참조합니다.  
**표 13(Table 13)**은 Contents 섹션 내 **TileMatrixSet 섹션의 구조**를 정의합니다.

> **참고 4**:  
> 클라이언트가 **모든 타일이 특정 TileMatrixSet에 정렬되어야 함**을 요구하는 경우,  
> **같은 TileMatrixSet 식별자를 공유하는 레이어만 표시**하도록 선택할 수 있습니다.  
> 또는 **TileMatrixSet 정의를 비교하여 동일 여부(정렬 여부)**를 판단할 수도 있습니다.  
> (두 타일 행렬이 정렬되어 있는지를 확인하는 간단한 계산을 수행할 수 있습니다.)

### 📘 표 13 — TileMatrixSet 데이터 구조의 구성 요소

| 이름                                        | 정의                                                                                | 데이터 유형 및 값                                                 | 개수 및 사용                                                                         |
| ------------------------------------------- | ----------------------------------------------------------------------------------- | ----------------------------------------------------------------- | ------------------------------------------------------------------------------------ |
| **identifier**(식별자)                      | 타일 매트릭스 세트의 식별자 [g]                                                     | `ows:CodeType` (ISO 19115의 `MD_Identifier` 클래스 기반)          | 하나 (필수)                                                                          |
| **title**(제목) [a]                         | 이 타일 매트릭스 세트의 제목 (사람이 보기 쉽게 표시됨)                              | `LanguageString` 구조체(OWS Common [OGC 06-121r3]의 그림 15 참조) | 0개 이상 (선택 사항)사용 가능하고 유용할 경우 포함사용된 각 언어마다 하나씩 포함 [f] |
| **abstract**(요약) [a]                      | 이 타일 매트릭스 세트에 대한 간략한 설명 (사람이 보기 쉬운 설명)                    | `LanguageString` 구조체                                           | 0개 이상 (선택 사항)                                                                 |
| **keywords**(키워드) [a]                    | 이 데이터셋을 설명하기 위해 사용되는 하나 이상의 일반적이거나 표준화된 단어 또는 구 | `MD_Keywords` 클래스 (ISO 19115 기반)                             | 0개 이상 (선택 사항)사용된 각 키워드 권한당 하나씩                                   |
| **boundingBox**(경계 상자)                  | 지원되는 CRS 내에서 타일 매트릭스 세트를 감싸는 최소 경계 사각형 [b]                | `BoundingBox` 데이터 구조 (OWS Common 10.2절 참조)                | 0개 또는 1개 (선택 사항)                                                             |
| **supportedCRS**(지원되는 좌표 참조 시스템) | 하나의 좌표 참조 시스템(CRS)에 대한 참조                                            | URI 타입                                                          | 하나 (필수)                                                                          |
| **wellKnownScaleSet**(잘 알려진 축척 세트)  | 잘 알려진 축척 세트에 대한 참조 [e]                                                 | URI 타입                                                          | 0개 또는 1개 (선택 사항) [c]                                                         |
| **tileMatrix**(타일 매트릭스)               | 축척 수준과 해당 타일 매트릭스를 설명                                               | `TileMatrix` 데이터 구조 (표 14 참조)                             | 1개 이상 (필수) [d]                                                                  |

> **a** : OWS Common [OGC 06-121r3] 문서의 **10.7.3절**에 정의된 다국어 범위 지정 규칙이 **반드시 적용**되어야 합니다.
> **b** : 가능한 경우, 이 값은 데이터가 표시될 것으로 예상되는 영역을 나타냅니다. 하지만 이는 반드시 타일 경계 전체를 포함한다는 의미는 아니며, 따라서 **타일 매트릭스의 TopLeftCorner를 포함하지 않을 수도 있습니다.** > **c** : 타일 매트릭스 세트가 잘 알려진 축척 세트(well-known scale set)에 부합하는 경우, 해당 URI로 **참조해야 합니다**. 이 축척 세트는 `supportedCRS` 및 `tileMatrix` 요소의 `scaleDenominator`와 **일관되어야 합니다**.
> **d** : 보통 하나 이상이 존재합니다. **각 tileMatrixSet의 tileMatrix는 고유한 scaleDenominator를 가져야 합니다.** > **e** : 일부 가능한 값들은 부록 E(Annex E)에 정의되어 있습니다.
> **f** : Title이 명시되지 않은 경우, 클라이언트는 대신 **Identifier 값을 표시**할 수 있습니다.
> **g** : 서버 내의 **각 TileMatrixSet 식별자는 고유해야 합니다**.
> **h** : 이 매개변수의 내용은 OWS Common [OGC 06-121r3] 문서의 **11.3절 및 부록 D.14**를 따릅니다.

---

### **Table 14 — TileMatrix 데이터 구조 구성 요소**

| 이름 (Names)                        | 정의 (Definition)                                                                     | 데이터 타입 및 값 (Data type and values)                            | 수량 및 사용 (Multiplicity and use)                                     |
| ----------------------------------- | ------------------------------------------------------------------------------------- | ------------------------------------------------------------------- | ----------------------------------------------------------------------- |
| **identifier**                      | 타일 매트릭스 식별자 [c]                                                              | `ows:CodeType`, ISO 19115의 `MD_Identifier` 클래스 기반             | 하나 (필수)                                                             |
| **title** [a]                       | 사람이 볼 수 있도록 표시되는 이 스타일의 제목                                         | `LanguageString` 자료구조, OWS Common [OGC 06-121r3]의 그림 15 참고 | 0개 이상 (선택)가능하고 유용할 경우 포함표현된 언어마다 하나씩 포함 [d] |
| **abstract** [a]                    | 사람이 볼 수 있도록 제공되는 이 스타일의 간략한 설명                                  | `LanguageString` 자료구조, OWS Common [OGC 06-121r3]의 그림 15 참고 | 0개 이상 (선택)가능하고 유용할 경우 포함표현된 언어마다 하나씩 포함     |
| **keywords** [c]                    | 이 데이터셋을 설명하기 위해 일반적으로 사용되거나 공식화된 단어 또는 구의 무순서 목록 | ISO 19115의 `MD_Keywords` 클래스                                    | 0개 이상 (선택)사용된 키워드 권한마다 하나씩 포함                       |
| **scaleDenominator**<br>스케일 분모 | 이 타일 매트릭스의 스케일 분모 수준                                                   | `Double` 타입                                                       | 하나 (필수)                                                             |
| **topLeftCorner**<br>좌상단 좌표    | 이 타일 매트릭스의 좌상단 모서리의 CRS 좌표 위치                                      | `double` 값들의 순서 있는 배열 [b]                                  | 하나 (필수)                                                             |
| **tileWidth**<br>타일 너비          | 이 타일 매트릭스의 각 타일의 너비 (픽셀 단위)                                         | 양의 정수형                                                         | 하나 (필수)                                                             |
| **tileHeight**<br>타일 높이         | 이 타일 매트릭스의 각 타일의 높이 (픽셀 단위)                                         | 양의 정수형                                                         | 하나 (필수)                                                             |
| **matrixWidth**<br>매트릭스 너비    | 이 매트릭스의 너비 (타일 개수 기준)                                                   | 양의 정수형                                                         | 하나 (필수)                                                             |
| **matrixHeight**<br>매트릭스 높이   | 이 매트릭스의 높이 (타일 개수 기준)                                                   | 양의 정수형                                                         | 하나 (필수)                                                             |

> **a** : 다국어 처리에 대해서는 OWS Common [OGC 06-121r3] 문서의 **10.7.3절**이 반드시 적용됩니다.
> **b** : CRS는 부모 `TileMatrixSet`의 `supportedCRS` 파라미터로부터 상속됩니다. 좌표의 축 순서는 `supportedCRS`에서 명시된 순서를 따릅니다. 이 값은 **(0,0) 타일의 왼쪽 상단 픽셀의 정확한 좌표**를 의미합니다 (Figure 2 참고).
> **c** : 이 `TileMatrix`의 식별자는 **부모 `TileMatrixSet` 내에서 고유**해야 합니다. 축척 분모나 픽셀 크기를 반올림한 값을 사용하는 것이 좋습니다.
> **d** : `title`이 제공되지 않을 경우, 클라이언트는 대신 `identifier`를 표시할 수 있습니다.
> **e** : XML 스키마에서는 `ows:PositionType` 데이터 타입이 사용됩니다. OWS 1.1 스키마(`owsCommon.xsd`) 참고.

**주석 5 (NOTE 5)**  
일반적인 축척(tile matrix)을 포함한 타일 매트릭스 세트를 하나의 좌표 참조 시스템(CRS, 예: CRS:84)으로 정의하고, 세부적인 축척을 다른 CRS(예: LCC 투영법)으로 정의하는 것이 바람직할 수 있습니다. 그러나 이 표준에서는 이를 허용하지 않습니다. 각 타일 매트릭스 세트는 하나의 CRS만 선언해야 합니다. 동일한 레이어에 대해 두 개의 타일 매트릭스 세트를 정의하는 것이 가능합니다.

**주석 6 (NOTE 6)**  
각 타일 매트릭스의 타일 개수(너비 및 높이)는 명시적으로 제공되므로, 클라이언트 애플리케이션에서 유효한 타일 인덱스 범위를 계산할 필요가 없습니다.

**주석 7 (NOTE 7)**  
타일 매트릭스의 바운딩 박스는 명시적으로 제공되지 않으며, topLeftCorner, tileWidth, tileHeight, scaleDenominator를 사용하여 계산할 수 있습니다.

---

### 7.1.1.1.3 Themes 섹션 내용

WMTS 서비스 메타데이터 문서에서 선택적으로 포함할 수 있는 **Themes 섹션**은 레이어가 주제별로 어떻게 구성되어 있는지를 설명하는 데이터를 포함해야 합니다(SHALL).

WMTS 표준은 WMS와는 다른 방식의 레이어 구성을 제안합니다. WMTS에서는 **주제(theme)** 개념을 기반으로 한 접근 방식을 사용합니다. WMTS의 **Contents 섹션**에서는 레이어가 계층 없이 선형 목록(linear list)으로 표현되며, 레이어 계층 구조는 **Themes 섹션**에서 별도로 정의됩니다.  
이 방식은 레이어 속성에 대해 복잡한 상속 규칙을 정의할 필요성을 없애주며, 개념을 분리시켜 클라이언트가 주제 계층 구조를 무시하거나 다른 방식으로 레이어를 구성할 수 있도록 쉽게 해줍니다. 또한, 하나의 서버가 **여러 개의 주제 섹션(themes section)** 을 통해 **여러 가지 레이어 구성 방식**을 제공하는 것도 가능합니다.

각 주제(theme)는 사람이 읽을 수 있는 설명(예: 제목)을 가지고 있으며, 레이어 참조 목록과 자식 주제(child themes)를 포함합니다.  
하나의 레이어는 **여러 주제에 속할 수 있으며**, **어떤 주제에도 속하지 않고 존재할 수도 있습니다**.

---

![[Pasted image 20250410124759.png]]

Themes 섹션은 표 15 및 표 16에 정의된 매개변수들을 반드시 포함해야 합니다.

### 📘 Table 15 — Themes 섹션의 구성 요소

| Names | Definition                                                                      | Data type and values          | Multiplicity and use                                    |
| ----- | ------------------------------------------------------------------------------- | ----------------------------- | ------------------------------------------------------- |
| theme | Theme이 서버에서 제공되는 레이어를 분류할 수 있는 최상위 주제에 대한 메타데이터 | Theme 데이터 구조, 표 16 참조 | 0개 이상 (선택 사항)사용 가능한 각 최상위 주제마다 하나 |

---

### 📘 Table 16 — Theme 데이터 구조의 구성 요소

| 이름 (Names) | 정의 (Definition)                                                                        | 데이터 유형 및 값 (Data type and values)                            | 반복성 및 사용 (Multiplicity and use)                                  |
| ------------ | ---------------------------------------------------------------------------------------- | ------------------------------------------------------------------- | ---------------------------------------------------------------------- |
| identifier   | 테마의 이름                                                                              | `ows:CodeType`, `ISO 19115`의 `MD_Identifier` 클래스의 변형         | 1개 (필수)                                                             |
| title [a]    | 사람이 읽을 수 있도록 표시되는 이 주제의 제목                                            | LanguageString 데이터 구조,OWS Common [OGC 06-121r3]의 그림 15 참조 | 0개 이상 (선택 사항)사용 가능한 경우 포함표시 언어별로 하나씩 포함 [c] |
| abstract [a] | 사람이 읽을 수 있도록 제공되는 이 주제에 대한 간략한 설명                                | LanguageString 데이터 구조,OWS Common [OGC 06-121r3]의 그림 15 참조 | 0개 이상 (선택 사항)사용 가능한 경우 포함표시 언어별로 하나씩 포함     |
| keywords [a] | 이 데이터셋을 설명하기 위해 일반적으로 사용되거나정형화된 단어 또는 구의 목록            | ISO 19115의 MD_Keywords 클래스                                      | 0개 이상 (선택 사항)사용된 각 키워드 권한(authority)마다 하나씩 포함   |
| theme        | 이 주제의 하위 주제에 대한 메타데이터(이 서버에서 사용 가능한 레이어들을 분류할 수 있음) | Theme 데이터 구조, 이 표 참조                                       | 0개 이상 (선택 사항)사용 가능한 각 주제마다 하나                       |
| layerRef     | 레이어에 대한 참조                                                                       | URI 타입서비스 메타데이터에 정의된 값들 [b]                         | 0개 이상 (선택 사항)                                                   |

> **a**: OWS Common [OGC 06-121r3]의 10.7.3절에 있는 다국어 범위 규칙이 적용되어야 합니다.
> **b**: ServiceMetadata 문서에 정의된 레이어 식별자입니다.
> **c**: 제목이 명시되지 않은 경우, 클라이언트는 식별자(identifier) 값을 대신 표시할 수 있습니다.

---

### 7.1.3 ServiceMetadata 리소스 요청

(**리소스 지향 아키텍처 스타일에서 필수**)

리소스 지향 아키텍처 스타일을 사용하는 WMTS 서버는 ServiceMetadata 리소스의 표현을 얻을 수 있는 **표준 엔드포인트**를 제공합니다. 해당 엔드포인트는 **ServiceMetadata 문서 내에 명시되어야 하며**, 일반적으로는 서버와의 통신에 앞서 획득됩니다.

클라이언트는 해당 엔드포인트에 표준 요청을 수행함으로써 ServiceMetadata 리소스의 표현을 요청합니다. **요청이 올바른 경우**, 서버는 **7.1.1 절의 규격을 준수하는 ServiceMetadata 문서의 표현을 제공해야 합니다**.

잘못된 요청에 대해서는, **클라이언트와 서버 간 통신에 사용되는 전송 프로토콜의 표준 오류 의미 체계에 따라 처리되어야 합니다.**

---

### 7.2 타일 (Tile)

WMTS 서버는 지도 이미지 타일을 제공하도록 설계되어 있습니다. 이전 절에서 설명한 ServiceMetadata 문서는 서버에서 제공 가능한 타일과 타일 요청 시 필요한 요건들을 나열합니다. 일반적으로 클라이언트는 먼저 서버로부터 ServiceMetadata 문서를 요청한 후, 그 문서에 포함된 정보를 활용하여 유효한 타일 요청 방법을 파악합니다.

---

### 7.2.1 타일 리소스 (Tile resource)

타일 리소스는 일반적으로 지도 데이터를 포함하는 **직사각형 이미지**입니다. 그러나 경우에 따라 이 리소스는 타일의 **비이미지 표현**일 수도 있으며, 예를 들어 타일에 대한 설명이나 실제 이미지에 대한 링크 등이 될 수 있습니다. 예시로는 superoverlay에서 사용되는 **KML 문서**나 타일 메타데이터 문서 등이 해당됩니다.

이미지 타일을 반환하는 경우에는 **항상 완전한 단일 타일 전체를 반환해야 합니다**. 또한, 클라이언트가 해당 타일을 다른 지도 데이터(다른 타일일 수 있음) 위에 오버레이할 수 있도록 **가능한 경우 배경 픽셀은 투명해야 합니다**.

타일 리소스 표현은 요청 시 명시된 형식으로 반환되어야 하며, 그 형식은 **해당 Tile 리소스에 대해 ServiceMetadata 문서에서 지원된다고 광고된 형식**이어야 합니다.

---

### 7.2.3 타일 리소스 요청

_(리소스 지향 아키텍처 스타일에서 필수)_

리소스 지향 아키텍처 스타일을 사용하는 WMTS 서버는 각 **Tile 리소스의 표현을 획득할 수 있는 표준 엔드포인트**를 제공합니다. 이러한 엔드포인트는 **주소 템플릿(address template)**을 사용하여 **ServiceMetadata 문서 내에 명시되어야 합니다**.

클라이언트는 서버와의 통신에 사용되는 **전송 프로토콜의 표준 의미 체계(semantics)**를 따르는 요청을 해당 주소로 수행함으로써, 제공된 Tile 리소스의 표현을 요청하게 됩니다.

올바른 요청에 대해 서버는 해당 **Tile 리소스의 표현을 반환해야 합니다(SHALL)**.  
잘못된 요청은 사용 중인 전송 프로토콜의 표준 오류 처리 방식에 따라 처리되어야 합니다.

---

### 7.3 FeatureInfo

WMTS 서버는 **지도 타일 상의 특정 픽셀 위치에 존재하는 지형지물(feature)에 대한 정보 요청**을 지원할 수 있습니다.

FeatureInfo 요청은 **특정 타일과 그 타일 내의 픽셀 위치를 지정**하게 됩니다.  
WMTS 서버는 **클라이언트가 지정한 위치 또는 그 근처에 존재하는 지형지물에 대한 정보**를 제공합니다.

서버는 **해당 위치 근처의 지형지물에 대해 어떤 정보를 제공할지 선택할 수 있습니다**.

---

### 7.3.1 FeatureInfo 문서

FeatureInfo 문서는 **프로시저 지향 아키텍처 스타일**에서는 `GetFeatureInfo` 요청의 응답으로 제공되며,  
**리소스 지향 아키텍처 스타일**에서는 `FeatureInfo` 리소스의 표현(representation)으로 제공됩니다.  
FeatureInfo 문서는 요청 시 명시된 형식으로 반환되어야 하며,  
그 형식은 해당 FeatureInfo 리소스에 대해 `ServiceMetadata` 문서에 광고되어 있어야 합니다.

서버와 클라이언트는 해당 GML 프로파일을 사용할 경우,  
**MIME 타입 `"application/gml+xml; version=3.1"`** 을 `InfoFormat` 값으로 지정해야 하며,  
응답의 GML 어플리케이션 스키마는 **GML Simple Features Profile level 0** 을 따라야 합니다.

대부분의 경우, FeatureInfo 문서에는 **지형지물의 주제 속성(thematic attributes)** 만 포함되도록 의도되었지만,  
Simple Feature 프로파일은 지형지물의 **기하 정보(geometry)** 도 포함하는 것을 고려하여 설계되었습니다.  
하지만, **기하 정보 없이 속성만 포함하는 GML 스키마**를 생성하는 것도 가능합니다.  
이러한 방식은 **선(Line)이나 폴리곤(Polygon) 레이어의 긴 좌표값 시퀀스 요청을 피하기에 유용**합니다.

또한, **데이터의 시각적 표현을 쉽게 하기 위해 HTML 형식(text/html)** 에 대한 지원도 권장됩니다.

> 💡 **참고:**  
> OGC 06-049r1에서는 `"text/xml; subType=gml/3.1.1/profiles/gmlsf/1.0.0/0"` 형식을 추천했으나,  
> OGC 09-144r1의 기술 위원회 방침에 따라 **GML MIME 타입 정책이 수정**되었습니다.  
> 본 문서는 이 새로운 정책을 채택합니다.

---

### 7.3.3 FeatureInfo 리소스 요청

_(리소스 지향 아키텍처 스타일에서 선택사항)_

리소스 지향 아키텍처 스타일을 사용하는 WMTS 서버는  
**FeatureInfo 리소스의 표현(representation)** 을 얻을 수 있는 **표준 엔드포인트(endpoint)** 를 제공합니다.  
이 엔드포인트는 **주소 템플릿(address template)** 기반으로 `ServiceMetadata` 문서에 명시되어야 합니다.

클라이언트는 서버와의 통신에 사용되는 **전송 프로토콜의 표준 의미 체계(semantics)** 에 따라  
해당 주소로 요청을 수행함으로써 FeatureInfo 리소스의 표현을 요청하게 됩니다.  
정상적인 요청에 대해, 서버는 **각 FeatureInfo 리소스의 표현**을 제공해야 합니다.

잘못된 요청에 대해서는 **해당 전송 프로토콜의 표준 오류 처리 방식**에 따라 처리되어야 합니다.

---

### 7.4 작업 요청 인코딩 (Operation request encoding)

**HTTP 상에서 수행되는 절차 지향 아키텍처 스타일**의 작업 요청 인코딩은 다음과 같이 정의됩니다:

- **HTTP GET** 방식에서는 **KVP(Key-Value Pair)** 인코딩을 사용해야 하며,
- **HTTP POST** 방식에서는 **KVP 또는 SOAP 인코딩**을 사용할 수 있습니다.  
   이 내용은 OWS Common 문서 [OGC 06-121r3]의 **11절**에 명시되어 있습니다.

**표 28**은 WMTS 서비스 작업들과 각각에 대해 정의된 요청 인코딩 방식을 요약한 것입니다:

| 작업 이름 (Operation name) | 요청 인코딩 방식 (Request encodings) |
| -------------------------- | ------------------------------------ |
| GetCapabilities (필수)     | KVP, SOAP                            |
| GetTile (필수)             | KVP, SOAP                            |
| GetFeatureInfo             | KVP, SOAP                            |

**표 28 — 절차 지향 아키텍처 스타일의 작업 요청 인코딩 요약**

- **HTTP GET 방식의 KVP 인코딩**은 **8절**에서 설명하고 있으며,
- **HTTP POST 방식의 SOAP 인코딩**은 **9절**에서 정의되어 있습니다.

---

이 표준은 **HTTP를 사용하는 리소스 지향 아키텍처 스타일**도 정의하고 있습니다.  
이 스타일에서는 `HTTP GET` 요청을 사용하여 서버에 있는 리소스의 표현(`GetResourceRepresentation`)에 접근해야 합니다.

이러한 리소스 표현은 절차 지향 아키텍처 스타일에서 `GetCapabilities`, `GetTile`, `GetFeatureInfo` 요청을 통해 얻는 결과와 **동등한 데이터**여야 합니다.

이 리소스 지향 스타일에 대해서는 **10절**에서 설명됩니다.

---
