## π **WMTS(Web Map Tile Service)**

### π“ κ°μ”

- WMTSλ” **λ―Έλ¦¬ μ •μλ μ •μ  μ΄λ―Έμ§€ νƒ€μΌ**μ„ μ κ³µν•μ—¬, **λ””μ§€ν„Έ μ§€λ„λ¥Ό λΉ λ¥΄κ³  ν¨μ¨μ μΌλ΅** μ„λΉ„μ¤ν•  μ μλ„λ΅ κ³ μ•λ OGC(Open Geospatial Consortium) ν‘μ¤€
- ν΄λΌμ΄μ–ΈνΈλ” ServiceMetadata λ¬Έμ„μ— λ…μ‹λ νƒ€μΌ μ •λ³΄μ™€ ν†µμ‹  ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•μ—¬ μ›ν•λ” νƒ€μΌμ„ μ”μ²­

---

### π” κΈ°μ΅΄ WMS(Web Map Service)μ™€μ μ°¨μ΄μ 

| κµ¬λ¶„    | WMS              | WMTS               |
| ----- | ---------------- | ------------------ |
| μ”μ²­ λ°©μ‹ | μ μ—°ν•κ³  μμ λ΅μ΄ μ”μ²­     | κ³ μ •λ νƒ€μΌλ§ μ”μ²­ κ°€λ¥      |
| μ„λ²„ λ¶€λ‹΄ | μ΄λ―Έμ§€ μ²λ¦¬ λ¶€ν• νΌ      | μΊμ‹±κ³Ό μ‚¬μ „ λ λ”λ§μΌλ΅ λ¶€λ‹΄ μ μ |
| μΊμ‹± ν¨μ¨ | λ‚®μ               | λ§¤μ° λ†’μ              |
| μ„±λ¥    | ν΄λΌμ΄μ–ΈνΈ μ μ¦κ°€ μ‹ λλ ¤μ§ | ν™•μ¥μ„± μ°μ             |
1. **μ΄λ―Έμ§€ μ¤λ²„λ μ΄λ” ν΄λΌμ΄μ–ΈνΈκ°€ μν–‰**
2. ν΄λΌμ΄μ–ΈνΈλ”Β **λ―Έλ¦¬ μ•½μ†λ μ„μΉμ μ΄λ―Έμ§€**λ§ μ”μ²­
3. μ„λ²„κ°€ μ κ³µν•λ”Β **νƒ€μΌλ“¤μ„ λ¨μμ΄ν¬ν•κ³  ν΄λ¦¬ν•‘**ν•μ—¬ μµμΆ… μ΄λ―Έμ§€ μƒμ„±

---

### β… WMTSμ μ¥μ 

- μ΄λ―Έμ§€λ¥Ό **λ―Έλ¦¬ λ λ”λ§**ν•κ±°λ‚ **μΊμ‹** μ „λµ μ‚¬μ© κ°€λ¥
- μ΄λ―Έμ§€ μ²λ¦¬ λ€μ‹  **ν†µμ‹  μ²λ¦¬ μ„±λ¥μ— κΈ°λ°ν•μ—¬ μ„λ²„ ν™•μ¥ κ°€λ¥**
- κΈ°μ΅΄ λ„¤νΈμ›ν¬ μΈν”„λΌ κΈ°μ μ„ ν™μ©ν•μ—¬ λ°μ΄ν„° μ „λ‹¬ μ†λ„μ™€ ν¨μ¨μ„ ν¬κ² ν–¥μƒ
- (κµ¬κΈ€ λ§µμ¤μ™€ κ°™μ€ λΉ„ν‘μ¤€ λ°©μ‹κ³Ό λΉ„κµν•μ—¬) ν‘μ¤€μ„ ν†µν•΄ **λ‹¤μ–‘ν• μ„λ²„ κ°„ μƒνΈμ΄μ©μ„± λ³΄μ¥**

---

### β™οΈ ν‘μ¤€ κµ¬μ„±

1. **μ¶”μƒ μ‚¬μ–‘ (Abstract Specification)**
   - μ„λ²„κ°€ μ κ³µν•λ” **λ¦¬μ†μ¤μ μλ―Έ**λ¥Ό μ •μ. **Service Metadata, Tile, FeatureInfo** (μ„ νƒμ )
2. **κµ¬μ²΄μ  κµ¬ν„ (Concrete Implementations)**
   - λ‘ κ°€μ§€ μ•„ν‚¤ν…μ² μ¤νƒ€μΌλ΅ μ κ³µλλ©°, ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„ ν†µμ‹  λ°©λ²• μ •μ

| κµ¬λ¶„      | μ μ°¨ μ§€ν–¥ μ•„ν‚¤ν…μ² (Procedure-Oriented)                 | λ¦¬μ†μ¤ μ§€ν–¥ μ•„ν‚¤ν…μ² (Resource-Oriented / RESTFul)         |
| ------- | ----------------------------------------------- | ------------------------------------------------- |
| μ„¤λ…      | μ „ν†µμ μΈ λ…λ Ή κΈ°λ° μ›Ή μ„λΉ„μ¤                                | REST μ¤νƒ€μΌμ μ›Ή λ¦¬μ†μ¤ μ”μ²­ λ°©μ‹                             |
| μ”μ²­      | **GetCapabilities, GetTile, GetFeatureInfo** μ—°μ‚° | **ServiceMetadata, Tile, FeatureInfo** λ¦¬μ†μ¤        |
| λ©”μ‹μ§€ ν¬λ§·  | KVP, XML, SOAP (XML) λ“±                          | λ¬Έμ„ ν•νƒ                                             |
| μ„λ²„ μ”κµ¬μ‚¬ν•­ | μ΄λ―Έμ§€ μ²λ¦¬ ν•„μ”                                       | μ •μ  XML λ¬Έμ„μ™€ μ΄λ―Έμ§€ νμΌ μ κ³µν•λ” μ›Ή μ„λ²„λ΅ μ„λΉ„μ¤ κ°€λ¥ (μ‚¬μ „ λ λ”λ§ ν• κ²½μ°) |
| μ¥μ       | μ μ—°ν• κΈ°λ¥ μ κ³µ                                       | λ°°ν¬ μ©μ΄, μΊμ‹± ν¨μ¨ λ†’μ, ν™•μ¥μ„± μ°μ                           |

---

## 1. ServiceMetadata

- `GetCapabilities μ—°μ‚°`  /  `ServiceMetadata λ¦¬μ†μ¤` μ”μ²­μ— λ€ν• μ‘λ‹µ
- **ν•„μ κµ¬ν„ ν•­λ©**
- μ„λ²„κ°€ μ§€μ›ν•λ” κΈ°λ¥ λ° λ³΄μ  μ •λ³΄μ— λ€ν•΄ μ„¤λ…
- μΌλ°μ μΌλ΅ ν΄λΌμ΄μ–ΈνΈλ” λ¨Όμ € μ„λ²„λ΅λ¶€ν„° ServiceMetadata λ¬Έμ„λ¥Ό μ”μ²­ν• ν›„, κ·Έ λ¬Έμ„μ— ν¬ν•¨λ μ •λ³΄λ¥Ό ν™μ©ν•μ—¬ μ ν¨ν• νƒ€μΌ μ”μ²­ λ°©λ²•μ„ νμ•…
- μ£Όμ” ν•­λ©
	 1. ServiceIdentification - μ„λ²„ μ •λ³΄
	 2. ServiceProvider - μ΄μ μ΅°μ§ μ •λ³΄
	 3. Contents - μ κ³µ λ°μ΄ν„° μ •λ³΄
	 4. Themes - λ μ΄μ–΄ μ£Όμ λ³„ κµ¬μ„± (μ„ νƒ)

![[Pasted image 20250415135357.png]]

### 1-1. ν•­λ© μƒμ„Έ
 [[capability_sample2.xml]]
```xml
<?xml version="1.0" encoding="UTF-8"?>
<!-- 
    Service Metadata
    μ μ°¨ μ§€ν–¥ GetCapabilities, λ¦¬μ†μ¤ μ§€ν–¥ ServiceMetadataURL μ”μ²­μ— λ€ν• μ‘λ‹µ
    version : 1.0.0 κ³ μ • -->
<Capabilities xmlns="http://www.opengis.net/wmts/1.0"
  xmlns:ows="http://www.opengis.net/ows/1.1"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:gml="http://www.opengis.net/gml"
  xsi:schemaLocation="http://www.opengis.net/wmts/1.0 http://schemas.opengis.net/wmts/1.0/wmtsGetCapabilities_response.xsd"
  version="1.0.0">
  <!-- μ΄ μ„λ²„μ— λ€ν• λ©”νƒ€λ°μ΄ν„°. OWS Common μ— μ •μ -->
  <ows:ServiceIdentification>
    <ows:Title>World example Web Map Tile Service</ows:Title>
    <ows:Abstract>Example service that constrains some world layers
      in the urn:ogc:def:wkss:OGC:1.0:GlobalCRS84Pixel Well-known
      scale set</ows:Abstract>
    <ows:Keywords>
      <ows:Keyword>World</ows:Keyword>
      <ows:Keyword>Global</ows:Keyword>
      <ows:Keyword>Digital Elevation Model</ows:Keyword>
      <ows:Keyword>Administrative Boundaries</ows:Keyword>
    </ows:Keywords>
    <ows:ServiceType>OGC WMTS</ows:ServiceType>
    <ows:ServiceTypeVersion>1.0.0</ows:ServiceTypeVersion>
    <ows:Fees>none</ows:Fees>
    <ows:AccessConstraints>none</ows:AccessConstraints>
  </ows:ServiceIdentification>
  <!-- μ΄ μ„λ²„λ¥Ό μ΄μν•λ” μ΅°μ§μ— λ€ν• λ©”νƒ€λ°μ΄ν„°. OWS Common μ— μ •μ -->
  <ows:ServiceProvider>
    <ows:ProviderName>UAB-CREAF-MiraMon</ows:ProviderName>
    <ows:ProviderSite xlink:href="http://www.creaf.uab.es/miramon" />
    <ows:ServiceContact>
      <ows:IndividualName>Joan Maso Pau</ows:IndividualName>
      <ows:PositionName>Senior Software Engineer</ows:PositionName>
      <ows:ContactInfo>
        <ows:Phone>
          <ows:Voice>+34 93 581 1312</ows:Voice>
          <ows:Facsimile>+34 93 581 4151</ows:Facsimile>
        </ows:Phone>
        <ows:Address>
          <ows:DeliveryPoint>Fac Ciencies UAB</ows:DeliveryPoint>
          <ows:City>Bellaterra</ows:City>
          <ows:AdministrativeArea>Barcelona</ows:AdministrativeArea>
          <ows:PostalCode>08193</ows:PostalCode>
          <ows:Country>Spain</ows:Country>
          <ows:ElectronicMailAddress>joan.maso@uab.es</ows:ElectronicMailAddress>
        </ows:Address>
      </ows:ContactInfo>
    </ows:ServiceContact>
  </ows:ServiceProvider>
  <!-- μ΄ μ„λΉ„μ¤κ°€ κµ¬ν„ν• μ μ°¨ μ§€ν–¥ μ•„ν‚¤ν…μ² μ¤νƒ€μΌμ μ‘μ—…μ— λ€ν• λ©”νƒ€λ°μ΄ν„°. μ μ°¨ μ§€ν–¥ μ•„ν‚¤ν…μ²μ—μ„ ν•„μ ν•­λ© -->
  <ows:OperationsMetadata>
    <!-- name : GetCapabilities | GetTile | GetFeatureInfo -->
    <ows:Operation name="GetCapabilities">
      <ows:DCP>
        <ows:HTTP>
          <!-- GET | POST -->
          <ows:Get xlink:href="http://cite.deegree.org/1.0.0">
            <!-- Get μ€ μ•„λμ™€ κ°™μ€ ν•μ‹μΌλ΅ GetEncoding μ •λ³΄λ¥Ό λ°λ“μ‹ ν¬ν•¨ -->
            <ows:Constraint name="GetEncoding">
              <ows:AllowedValues>
                <!-- GET μ—μ„ ν—μ©ν•λ” μΈμ½”λ”© λ°©μ‹ : KVP -->
                <ows:Value>KVP</ows:Value>
              </ows:AllowedValues>
            </ows:Constraint>
          </ows:Get>
        </ows:HTTP>
      </ows:DCP>
    </ows:Operation>
    <ows:Operation name="GetTile">
      <ows:DCP>
        <ows:HTTP>
          <ows:Post xlink:href="http://cite.deegree.org/1.0.0">
            <!-- Post λ” μ•„λμ™€ κ°™μ€ ν•μ‹μΌλ΅ PostEncoding μ •λ³΄λ¥Ό λ°λ“μ‹ ν¬ν•¨ -->
            <ows:Constraint name="PostEncoding">
              <ows:AllowedValues>
                <!-- POST μ—μ„ ν—μ©ν•λ” μΈμ½”λ”© λ°©μ‹ : SOAP | XML | KVP -->
                <ows:Value>KVP</ows:Value>
              </ows:AllowedValues>
            </ows:Constraint>
            <!-- μΈμ½”λ”© λ°©μ‹μ„ 1κ° μ΄μƒ μ§€μ›ν•  μ μμΌλ©°, 
            μΈμ½”λ”© URL μ΄ λ‹¤λ¥΄λ‹¤λ©΄ Constraint νλΌλ―Έν„°λ΅ λ…μ‹ν•κ³ 
            λ¨λ‘ κ°™λ‹¤λ©΄ OperationsMEtadata μ„Ήμ…μ— λ…μ‹ -->
          </ows:Post>
        </ows:HTTP>
      </ows:DCP>
    </ows:Operation>
  </ows:OperationsMetadata>
  <!-- μ΄ μ„λ²„κ°€ μ κ³µν•λ” λ°μ΄ν„°μ— λ€ν• λ©”νƒ€λ°μ΄ν„°. Layer, TileMatrixSet, ... -->
  <Contents>
    <!-- μ΄ μ„λ²„μ—μ„ μ κ³µν•λ” μµμƒμ„ λ°μ΄ν„°μ…‹μ— λ€ν• λ©”νƒ€λ°μ΄ν„° = μ„λ²„κ°€ μ κ³µν•λ” μ§€λ¦¬ κ³µκ°„ μ •λ³΄μ κ°€μ¥ ν° λ¬¶μ λ‹¨μ„
    (λ°μ΄ν„°μ…‹ : νΉμ • μ£Όμ λ‚ λ©μ μ— λ§λ” μ§€λ¦¬ μ •λ³΄μ μ§‘ν•©. λμ¤ν„° or λ²΅ν„°)
    OtherSource κ°€ μ—†λ‹¤λ©΄ 1κ° μ΄μƒ ν•„μ -->
    <Layer>
      <!-- μ λ©
        LanguageString κµ¬μ΅°λ΅ μ§€μ›λλ” μ–Έμ–΄λ³„λ΅ ν•λ‚μ”© μ„ μ–Έ (λ‹¤λ¥Έ μ”μ†μ— μλ” Title, Abstract λ“¤λ„ λ™μΌ)
        e.g. <ows:Title xml:lang="ko">μƒν” OWS μ„λΉ„μ¤</ows:Title> 
      -->
      <ows:Title>etopo2</ows:Title>
      <!-- μ”μ•½ μ„¤λ… -->
      <ows:Abstract>ETOPO2 - 2 minute Worldwide Bathymetry/Topography Data taken from National
        Geophysical Data Center(NGDC) CD-ROM, ETOPO2 Global 2' Elevations, September 2001.
      </ows:Abstract>
      <!-- WGS84 CRS Bounding Box. κ²½λ„, μ„λ„ μ. κ·Όμ‚¬μΉμΌ μ μμΌλ‚ κ°€λ¥ν•λ©΄ μ •λ°€ν•κ² μ κ³µν•΄μ•Ό ν•¨ -->
      <ows:WGS84BoundingBox>
        <ows:LowerCorner>-180 -90</ows:LowerCorner>
        <ows:UpperCorner>180 90</ows:UpperCorner>
      </ows:WGS84BoundingBox>
      <!-- μ‹λ³„μ. μ„λ²„ λ‚΄ λ¨λ“  λ μ΄μ–΄μ—μ„ κ³ μ ν•΄μ•Ό ν•¨ -->
      <ows:Identifier>etopo2</ows:Identifier>
      <!-- λ°μ΄ν„°μ…‹μ— λ€ν• μ¶”κ°€ λ©”νƒ€λ°μ΄ν„° -->
      <ows:Metadata xlink:href="http://www.opengis.uab.es/SITiled/world/etopo2/metadata.htm" />
      <!-- λ μ΄μ–΄μ— μ μ©λ μ¤νƒ€μΌ. 1κ° μ΄μƒ ν•„μ
      isDefault : ν΄λΌμ΄μ–ΈνΈκ°€ κΈ°λ³Έμ μΌλ΅ μ„ νƒν•΄μ•Ό ν•  μ¤νƒ€μΌμΈμ§€ μ—¬λ¶€ -->
      <Style isDefault="true">
        <ows:Title>default</ows:Title>
        <!-- μ‹λ³„μ. λ™μΌ λ μ΄μ–΄ λ‚΄μ—μ„ κ³ μ ν•΄μ•Ό ν•¨ -->
        <ows:Identifier>default</ows:Identifier>
        <!-- μ΄ μ¤νƒ€μΌμ μ§€λ„λ¥Ό μ„¤λ…ν•λ” λ²”λ΅€ μ΄λ―Έμ§€μ— λ€ν• μ„¤λ…. νƒ€μΌμ— ν‘ν„λ μ •λ³΄μ μ‹κ°μ  μ”μ•½ μ κ³µ. 
        μ΄λ―Έμ§€μ— λ μ΄μ–΄ μ λ©μ„ ν…μ¤νΈλ΅ ν¬ν•¨ν•΄μ„λ” μ• λ¨.
        minScaleDenominator: μ΄ λ²”λ΅€ μ΄λ―Έμ§€κ°€ μ ν¨ν• μµμ† μ¶•μ²™ λ¶„λ¨, maxScaleDenominator, with: λ²”λ΅€ μ΄λ―Έμ§€ λ„λΉ„(ν”½μ…€ λ‹¨μ„), height
         -->
        <LegendURL format="image/png"
          xlink:href="http://www.opengis.uab.es/SITiled/world/etopo2/legend.png" />
      </Style>
      <!-- νƒ€μΌ μ”μ²­μ„ μ„ν• μ§€μ›λλ” μ¶λ ¥ ν¬λ§·. MimeType. 1κ° μ΄μƒ ν•„μ
      ν¬λ§· λ©λ΅μ΄ κΈΈλ©΄ ν΄λΌλ¦¬μ–ΈνΈμ™€ μƒνΈμ΄μ©μ„±μ€ ν–¥μƒλλ§ μΊμ‹ ν¨μ¨μ„± κ°μ†. μΌλ°μ μΌλ΅ image/png, image/jpeg κ¶μ¥ -->
      <Format>image/png</Format>
      <!-- FeatureInfo μ”μ²­μ„ μ„ν• μ§€μ›λλ” μ¶λ ¥ ν¬λ§·. MimeType. application/gml+xml; version=3.1 κ¶μ¥ -->
      <InfoFormat>application/gml+xml; version=3.1</InfoFormat>
      <!-- νƒ€μΌ λ§¤νΈλ¦­μ¤ μ„ΈνΈ λ° κ·Έ μ ν•μ‚¬ν•­μ— λ€ν• μ°Έμ΅° -->
      <TileMatrixSetLink>
        <TileMatrixSet>WholeWorld_CRS_84</TileMatrixSet>
      </TileMatrixSetLink>
      <!-- Tile, FeatureInfo μμ›μ— λ€ν• URL ν…ν”λ¦Ώ. λ¦¬μ†μ¤ μ§€ν–¥ μ•„ν‚¤ν…μ² μ¤νƒ€μΌμ—μ„ ν•λ‚ μ΄μƒ ν¬ν•¨ κ¶μ¥ -->
      <ResourceURL format="image/png" resourceType="tile"
        template="http://www.opengis.uab.es/SITiled/world/etopo2/default/WholeWorld_CRS_84/{TileMatrix}/{TileRow}/{TileCol}.png" />
      <ResourceURL format="application/gml+xml; version=3.1" resourceType="FeatureInfo"
        template="http://www.opengis.uab.es/SITiled/world/etopo2/default/WholeWorld_CRS_84/{TileMatrix}/{TileRow}/{TileCol}/{J}/{I}.xml" />
      <!-- λ‹¤μ°¨μ› λ°μ΄ν„°μ κ²½μ°(μ‹κ°„, κ³ λ„ λ“±) Dimension section κ³Ό κµ¬μ„± μ”μ† value λ¥Ό ν†µν•΄ μ‚¬μ© κ°€λ¥ν• κ°’ λ…μ‹ -->
    </Layer>
    <Layer>
      <ows:Title>Administrative Boundaries</ows:Title>
      <ows:Abstract>The sub Country Administrative Units 1998 GeoDataset represents a small-scale
        world political map.
      </ows:Abstract>
      <ows:WGS84BoundingBox>
        <ows:LowerCorner>-180 -90</ows:LowerCorner>
        <ows:UpperCorner>180 84</ows:UpperCorner>
      </ows:WGS84BoundingBox>
      <ows:Identifier>AdminBoundaries</ows:Identifier>
      <ows:Metadata
        xlink:href="http://www.opengis.uab.es/SITiled/world/AdminBoundaries/metadata.htm" />
      <Style isDefault="true">
        <ows:Title>default</ows:Title>
        <ows:Identifier>default</ows:Identifier>
      </Style>
      <Format>image/png</Format>
      <TileMatrixSetLink>
        <TileMatrixSet>World84-90_CRS_84</TileMatrixSet>
      </TileMatrixSetLink>
      <ResourceURL format="image/png" resourceType="tile"
        template="http://cite.deegree.org/1.0.0/cite/default/2007-06/InspireCrs84Quad/{TileMatrix}/{TileRow}/{TileCol}.png" />
      <ResourceURL format="application/gml+xml; version=3.1" resourceType="FeatureInfo"
        template="http://cite.deegree.org/1.0.0/cite/default/2007-06/InspireCrs84Quad/{TileMatrix}/{TileRow}/{TileCol}/{J}/{I}.xml" />
    </Layer>
    <TileMatrixSet>
      <!-- μ‹λ³„μ -->
      <ows:Identifier>WholeWorld_CRS_84</ows:Identifier>
      <!-- μ§€μ›λλ” μΆν‘ μ°Έμ΅° μ‹μ¤ν…. λ°λ“μ‹ 1κ°. λ™μΌ λ μ΄μ–΄μ— λ€ν•΄ TileMatrixSet λ” μ—¬λ¬κ°μΌ μ μλ‹¤ -->
      <ows:SupportedCRS>urn:ogc:def:crs:OGC:1.3:CRS84</ows:SupportedCRS>
      <!-- μ μ•λ ¤μ§„ μ¶•μ²™ μ„ΈνΈ -->
      <WellKnownScaleSet>urn:ogc:def:wkss:OGC:1.0:GlobalCRS84Pixel</WellKnownScaleSet>
      <!-- TileMatrix μ BoundingBox λ” μ κ³µλμ§€ μ•μΌλ©° κ³„μ‚° ν•„μ” -->
      <TileMatrix>
        <!-- μ‹λ³„μ. TileMatrixSet λ‚΄μ—μ„ κ³ μ  -->
        <ows:Identifier>2g</ows:Identifier>
        <!-- μ¤μΌ€μΌ λ¶„λ¨ -->
        <ScaleDenominator>795139219.951954</ScaleDenominator>
        <!-- μΆμƒλ‹¨ μΆν‘. (0,0)νƒ€μΌ μ™Όμ½ μƒλ‹¨ ν”½μ…€μ μ •ν™•ν• μΆν‘ -->
        <TopLeftCorner>-180 90</TopLeftCorner>
        <!-- κ° νƒ€μΌμ λ„λΉ„. ν”½μ…€ -->
        <TileWidth>320</TileWidth>
        <!-- κ° νƒ€μΌμ λ†’μ΄. ν”½μ…€ -->
        <TileHeight>200</TileHeight>
        <!-- λ§¤νΈλ¦­μ¤μ λ„λΉ„. νƒ€μΌ κ°μ -->
        <MatrixWidth>1</MatrixWidth>
        <!-- λ§¤νΈλ¦­μ¤μ λ†’μ΄. νƒ€μΌ κ°μ -->
        <MatrixHeight>1</MatrixHeight>
      </TileMatrix>
      <TileMatrix>
        <ows:Identifier>1g</ows:Identifier>
        <ScaleDenominator>397569609.975977</ScaleDenominator>
        <TopLeftCorner>-180 90</TopLeftCorner>
        <TileWidth>320</TileWidth>
        <TileHeight>200</TileHeight>
        <MatrixWidth>2</MatrixWidth>
        <MatrixHeight>1</MatrixHeight>
      </TileMatrix>
    </TileMatrixSet>
  </Contents>
  <!-- λ μ΄μ–΄κ°€ μ£Όμ λ³„λ΅ μ–΄λ–»κ² κµ¬μ„±λμ–΄ μλ”μ§€ μ„¤λ…ν•λ” λ°μ΄ν„° = λ μ΄μ–΄ κ³„μΈµ κµ¬μ΅° μ •μ
    λ μ΄μ–΄λ” μ£Όμ  0 ~ N κ°μ— μ†ν•  μ μλ‹¤ -->
  <Themes>
    <!-- μ΄ μ„λ²„μ—μ„ μ κ³µλλ” λ μ΄μ–΄λ¥Ό λ¶„λ¥ν•  μ μλ” μµμƒμ„ μ£Όμ μ— λ€ν• λ©”νƒ€λ°μ΄ν„° -->
    <Theme>
      <ows:Title>Foundation</ows:Title>
      <ows:Abstract>World reference data</ows:Abstract>
      <!-- μ΄λ¦„ -->
      <ows:Identifier>Foundation</ows:Identifier>
      <!-- μ΄ μ£Όμ μ ν•μ„ μ£Όμ μ— λ€ν• λ©”νƒ€λ°μ΄ν„° -->
      <Theme>
        <ows:Title>Digital Elevation Model</ows:Title>
        <ows:Identifier>DEM</ows:Identifier>
        <!-- λ μ΄μ–΄μ— λ€ν• μ°Έμ΅° -->
        <LayerRef>etopo2</LayerRef>
      </Theme>
      <Theme>
        <ows:Title>Administrative Boundaries</ows:Title>
        <ows:Identifier>AdmBoundaries</ows:Identifier>
        <LayerRef>AdminBoundaries</LayerRef>
      </Theme>
    </Theme>
    <Theme>
      <ows:Title>World Geology</ows:Title>
      <ows:Identifier>World Geology</ows:Identifier>
      <LayerRef>worldAgeRockType</LayerRef>
      <LayerRef>worldFaultLines</LayerRef>
      <LayerRef>felsicMagmatic</LayerRef>
      <LayerRef>maficMagmatic</LayerRef>
    </Theme>
  </Themes>
  <!-- ServiceMetadata λ¦¬μ†μ¤μ— λ€ν• μ°Έμ΅°. λ¦¬μ†μ¤ μ§€ν–¥ μ•„ν‚¤ν…μ²μ—μ„ ν•„μ ν•­λ© -->
  <ServiceMetadataURL xlink:href="http://cite.deegree.org/1.0.0/WMTSCapabilities.xml" />
</Capabilities>
```

(λ¦¬μ†μ¤ μ§€ν–¥ κµ¬μ΅°μ—μ„λ” OperationsMetadata κ°€ μ—†κ³ , μ μ°¨ μ§€ν–¥ κµ¬μ΅°μ—μ„λ” ServiceMetadataURL κ°€ μ—†λ‹¤)
### 1-2. TileMatrixSet
#### 1-2-1. κΈ°λ³Έ κ°λ…
- νƒ€μΌ λ§¤νΈλ¦­μ¤ : μ§€λ„ λ μ΄μ–΄μ κ³µκ°„ ν‘ν„
- νƒ€μΌ λ§¤νΈλ¦­μ¤ μ„ΈνΈ : ν•λ‚ μ΄μƒμ νƒ€μΌ λ§¤νΈλ¦­μ¤λ΅ κµ¬μ„±

#### 1-2-2. νƒ€μΌ λ§¤νΈλ¦­μ¤ κµ¬μ„± μ”μ†
- νƒ€μΌμ μ¶•μ²™ (ScaleDenominator)
	- κΈ°μ¤€ ν”½μ…€ ν¬κΈ° 0.28mm Γ— 0.28mm κΈ°λ° μ •μ
	- μ‹¤μ  λ””μ¤ν”λ μ΄ ν”½μ…€ ν¬κΈ°λ¥Ό λ¨λ¥΄λ” κ²½μ°κ°€ λ§μ•„μ„ 0.28 μ‚¬μ©
- νƒ€μΌμ ν”½μ…€ λ‹¨μ„ λ„λΉ„μ™€ λ†’μ΄  (TileWidth / TileHeight)
- νƒ€μΌ λ§¤νΈλ¦­μ¤μ μΆμƒλ‹¨ μΆν‘  (TopLeftCorner)
	- μΆν‘ μ°Έμ΅°κ³„(CRS) κΈ°μ¤€μ νƒ€μΌ λ§¤νΈλ¦­μ¤μ μΆμƒλ‹¨ μΆν‘
	- κ°€μ¥ μ™Όμ½ μƒλ‹¨ νƒ€μΌμ κ°€μ¥ μ™Όμ½ μƒλ‹¨ ν”½μ…€ μΆν‘
- νƒ€μΌ λ§¤νΈλ¦­μ¤μ κ°€λ΅ Γ— μ„Έλ΅ νƒ€μΌ μ (MatrixWidth / MatrixHeight)

#### 1-2-3. κ²½κ³„ μƒμ κ³„μ‚°
```
pixelSpan = scaleDenominator / 0.00028 / metersPerUnit
tileSpanX = tileWidth Γ— pixelSpan
tileSpanY = tileHeight Γ— pixelSpan
tileMatrixMaxX = tileMatrixMinX + (tileSpanX Γ— matrixWidth)
tileMatrixMinY = tileMatrixMaxY - (tileSpanY Γ— matrixHeight)
```
![[Pasted image 20250414144651.png]]

```xml
        <TileMatrixSet>
            <ows:Identifier>BigWorldPixel</ows:Identifier>
            <ows:SupportedCRS>urn:ogc:def:crs:OGC:1.3:CRS84</ows:SupportedCRS>
            <WellKnownScaleSet>urn:ogc:def:wkss:OGC:1.0:GlobalCRS84Pixel</WellKnownScaleSet>
            <TileMatrix>
                <ows:Identifier>10000m</ows:Identifier>
                <ScaleDenominator>33130800.83133142</ScaleDenominator>
                <TopLeftCorner>-180 90</TopLeftCorner>
                <TileWidth>640</TileWidth>
                <TileHeight>480</TileHeight>
                <MatrixWidth>7</MatrixWidth>
                <MatrixHeight>5</MatrixHeight>
            </TileMatrix>
```
(μ„ λ°μ΄ν„°λ” μƒν” λ°μ΄ν„°λ΅ κ³„μ‚°ν•΄λ„ μ •ν™•ν• κ°’μ€ λ‚μ¤μ§€ μ•μΌλ©°, metersPerUnit μ€ CRS μ— λ”°λΌ μ •ν•΄μ§„λ‹¤)

#### 1-2-4. νƒ€μΌ μΈλ±μ‹±

- TileCol(μ—΄)κ³Ό TileRow(ν–‰) μΈλ±μ¤ μ‚¬μ©
- μ›μ  (0,0)μ€ μΆμΈ΅ μƒλ‹¨
- μ—΄μ€ μ¤λ¥Έμ½μΌλ΅, ν–‰μ€ μ•„λμ½μΌλ΅ μ¦κ°€

#### ![[Pasted image 20250408154041.png]]

### 1-3. νƒ€μΌ λ§¤νΈλ¦­μ¤ μ„ΈνΈ μ ν• (TileMatrixSetLimits)

- λ μ΄μ–΄μ μ‹¤μ  λ°μ΄ν„° μμ—­ μ •μ
- λ¶ν•„μ”ν• νƒ€μΌ μ”μ²­ λ°©μ§€
- μΊμ‹ ν¨μ¨μ„± ν–¥μƒ
- κµ¬μ„± μ”μ†
	- minTileRow, maxTileRow: μ ν¨ν• νƒ€μΌ ν–‰ λ²”μ„
	- minTileCol, maxTileCol: μ ν¨ν• νƒ€μΌ μ—΄ λ²”μ„

### 1-4. Well-known Scale Sets

- λ―Έλ¦¬ μ •μλ ν‘μ¤€ μ¶•μ²™ μ§‘ν•©
- μ¥μ 
	- λ‹¤λ¥Έ WMTS μ„λ²„μ™€μ νΈν™μ„± ν–¥μƒ
	- ν΄λΌμ΄μ–ΈνΈ νΈν™μ„± κ²€μ¦ μ©μ΄
	- μ—¬λ¬ μ„λΉ„μ¤μ μ΅°ν•©(mash-up) μ©μ΄

---
## 2. Tile

- `GetTile μ—°μ‚°` / `Tile λ¦¬μ†μ¤` μ”μ²­μ— λ€ν• μ‘λ‹µ
- **ν•„μ κµ¬ν„ ν•­λ©**
- νΉμ • λ μ΄μ–΄μ μ§€λ„ μ΅°κ°(νƒ€μΌ)μ„ λ°ν™
- μ:
```xml
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema"
  xsi:schemaLocation="http://www.w3.org/2003/05/soap-envelope http://www.w3.org/2003/05/soap-envelope">
  <soap:Body>
    <BinaryPayload xmlns="http://www.opengis.net/wmts/1.0"
      xsi:schemaLocation="http://www.opengis.net/wmts/1.0 http://schemas.opengis.net/wmts/1.0/wmtsPayload_response.xsd">
      <Format>image/png</Format>
      <BinaryContent>
        <![CDATA[iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAABGdBTUEAALGP
        C/xhBQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9YGARc5KB0XV+IA
        AAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAF1J
        REFUGNO9zL0NglAAxPEfdLTs4BZM4DIO4C7OwQg2JoQ9LE1exdlYvBBeZ7jq
        ch9//q1uH4TLzw4d6+ErXMMcXuHWxId3KOETnnXXV6MJpcq2MLaI97CER3N0
        vr4MkhoXe0rZigAAAABJRU5ErkJggg==]]>
      </BinaryContent>
    </BinaryPayload>
  </soap:Body>
</soap:Envelope>
```

### 2-1. νƒ€μΌ λ¦¬μ†μ¤

- μ§€λ„ λ°μ΄ν„°λ¥Ό λ‹΄μ€ **μ§μ‚¬κ°ν• μ΄λ―Έμ§€** λλ” **μ„¤λ… λ¬Έμ„**λ‚ **λ§ν¬**
    μ: Superoverlayμ—μ„ μ‚¬μ©ν•λ” **KML λ¬Έμ„**, νƒ€μΌ λ©”νƒ€λ°μ΄ν„° λ¬Έμ„
- **λ°ν™ κ·μΉ™**
    - ν•­μƒ **μ™„μ „ν• λ‹¨μΌ νƒ€μΌ μ „μ²΄**λ¥Ό λ°ν™ν•΄μ•Ό ν•¨
    - λ°°κ²½ ν”½μ…€μ€ **κ°€λ¥ν• κ²½μ° ν¬λ… μ²λ¦¬** (λ‹¤λ¥Έ μ§€λ„ μ„μ— μ¤λ²„λ μ΄ κ°€λ¥ν•κ² ν•κΈ° μ„ν•¨)
- ν΄λΌμ΄μ–ΈνΈλ” **ServiceMetadata μ—μ„ μ§€μ›ν•λ‹¤κ³  λ…μ‹ν• ν•μ‹**μΌλ΅ μ”μ²­ν•κ³ , 
  μ„λ²„λ” μ”μ²­ν• ν•μ‹μΌλ΅ λ°ν™

### 2-2. νƒ€μΌ λ¦¬μ†μ¤ μ”μ²­

-  λ¦¬μ†μ¤ μ§€ν–¥ μ•„ν‚¤ν…μ² μ¤νƒ€μΌμ—μ„ ν•„μ
- κ° νƒ€μΌ λ¦¬μ†μ¤ ν‘ν„μ„ μ–»μ„ μ μλ” **ν‘μ¤€ URL μ—”λ“ν¬μΈνΈ μ κ³µ**
	- **ServiceMetadata ResourceURL** λ΅ μ •μ
- μ¬λ°”λ¥Έ μ”μ²­μ— λ€ν•΄ μ„λ²„λ” Tile λ¦¬μ†μ¤λ¥Ό λ°ν™ν•κ³ , 
  μλ»λ μ”μ²­μ€ μ „μ†΅ ν”„λ΅ν† μ½μ— λ§λ” **ν‘μ¤€ μ¤λ¥ λ°©μ‹**μ— λ”°λΌ μ²λ¦¬
- μ: https://a.tile.openstreetmap.org/15/9798/14664.png


---
## 3. **FeatureInfo**

### 3-1. **FeatureInfo λ¦¬μ†μ¤**

- `GetFeatureInfo μ—°μ‚°` / `FeatureInfo λ¦¬μ†μ¤` μ”μ²­μ— λ€ν• μ‘λ‹µ
- **μ„ νƒμ  κµ¬ν„ ν•­λ©**
- νΉμ • νƒ€μΌμ ν”½μ…€ μ„μΉ λλ” κ·Όμ²μ— μ΅΄μ¬ν•λ” μ§€ν•μ§€λ¬Ό(feature)μ— λ€ν• μ •λ³΄ μ κ³µ
- ν΄λΌμ΄μ–ΈνΈλ” **ServiceMetadata μ—μ„ μ§€μ›ν•λ‹¤κ³  λ…μ‹ν• ν•μ‹**μΌλ΅ μ”μ²­ν•κ³ , 
  μ„λ²„λ” μ”μ²­ν• ν•μ‹μΌλ΅ λ°ν™
	- μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°„ λ” λ‚μ€ μƒνΈμ΄μ©μ„±μ„ μ„ν•΄, **GML Simple Features Profile [06-049r1]** Level 0 μ‚¬μ©μ„ κ°•λ ¥ν κ¶μ¥
	- λ°μ΄ν„°μ μ‹κ°μ  ν‘ν„μ„ μ‰½κ² ν•κΈ° μ„ν•΄ **HTML ν•μ‹(text/html)** μ— λ€ν• μ§€μ›λ„ κ¶μ¥
- Simple Feature Profile μ€ **μ§€μ¤λ©”νΈλ¦¬ μ •λ³΄** λ„ ν¬ν•¨ κ°€λ¥
- μ :
```xml
<?xml version="1.0" encoding="UTF-8"?>
<ReguralGriddedElevations xmlns="http://www.maps.bob/etopo2"
    xmlns:gml="http://www.opengis.net/gml"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.maps.bob/etopo2 GetFeatureInfoExampleSchema.xsd">
    <featureMember>
        <GridPoint_etopo2>
            <elevation>503.0</elevation>
            <TileRow>1</TileRow>
            <TileCol>2</TileCol>
            <J>86</J>
            <I>132</I>
        </GridPoint_etopo2>
    </featureMember>
</ReguralGriddedElevations>
```

### 3-2. FeatureInfo λ¦¬μ†μ¤ μ”μ²­

- νƒ€μΌ λ¦¬μ†μ¤ μ”μ²­κ³Ό λ™μΌ

---

## β…  λ¦¬μ†μ¤ μ§€ν–¥ μ•„ν‚¤ν…μ² μ μμ‚¬ν•­

- HTTP GET λ§ μ‚¬μ©
- ν‘μ¤€ URL
	- μ„λΉ„μ¤ λ©”νƒ€λ°μ΄ν„° λ¬Έμ„ URL
		- **λ‹¨μΌ μ§„μ…μ (Entry Point)**. κ·Έ μ™Έμ λ¨λ“  URL μ—”λ“ν¬μΈνΈλ” ServiceMetadata λ¬Έμ„ λ‚΄ κ° λ μ΄μ–΄μ `ResourceURL` μ”μ†μ— ν¬ν•¨λ ν…ν”λ¦Ώμ„ λ¶„μ„ν•¨μΌλ΅μ¨ μ–»μ„ μ μλ‹¤
	- νƒ€μΌ URL
	- FeatureInfo λ¬Έμ„ URL

### ServiceMetadata λ¦¬μ†μ¤

- ν΄λΌμ΄μ–ΈνΈκ°€ HTTP μ„λ²„μ— URL μ”μ²­ν•μ—¬ ServiceMetadata λ¬Έμ„λ¥Ό μ§μ ‘ λ‹¤μ΄λ΅λ“
- κ¶μ¥ URLΒ ν•μ‹:Β {WMTSBaseURL}/1.0.0/WMTSCapabilities.xml
	- μ: http://www.maps.bob/1.0.0/WMTSCapabilities.xml
- XML ν•μ‹(application/xml) ν•„μΒ μ§€μ›
- λ―Έμ§€μ› λ¬Έμ„ λ²„μ „λ‚ ν•μ‹ μ”μ²­ν•λ” κ²½μ° 404 λ°ν™ 

### Tile λ¦¬μ†μ¤

- ServiceMetadata λ¬Έμ„μ κ° Layerλ” ResourceURLΒ μ”μ† λ°λ“μ‹Β ν¬ν•¨
- ResourceURL
	- format : MimeType
	- resourceType : λ°λ“μ‹ "tile"
	- template : URL ν…ν”λ¦Ώ λ¬Έμμ—΄
		- style, TileMatrixSet, TileMatrix, TileRow, TileCol ν•„μ
	- μ :
```xml
<ResourceURL
  format="image/png"
  resourceType="tile"
  template="http://www.maps.bob/etopo2/default/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}.png" />
```
http://www.maps.bob/etopo2/default/WholeWorld_CRS_84/10m/1/3.png

- μμ™Έ μ²λ¦¬
	- μ μ ν• **HTTP μ¤λ¥ μ½”λ“**λ¥Ό λ°ν™
	- μ¤λ¥ μ½”λ“μ—λ” κ°€λ¥ν•λ©΄ **XML ν•μ‹μ ExceptionReport** λ¬Έμ„λ¥Ό ν¬ν•¨ (OWS Common 8.5)

### FeatureInfo λ¦¬μ†μ¤

- ServiceMetadata λ¬Έμ„μ κ° Layerλ” ResourceURLΒ μ”μ† λ°λ“μ‹Β ν¬ν•¨
- ResourceURL
	- format : MimeType
	- resourceType : λ°λ“μ‹ "FeatureInfo"
	- template : URL ν…ν”λ¦Ώ λ¬Έμμ—΄
		- style, TileMatrixSet, TileMatrix, TileRow, TileCol, J, I ν•„μ
- μ”μ²­ URL λ° μμ™Έ μ²λ¦¬λ” Tile λ¦¬μ†μ¤μ™€ μ μ‚¬

---

## π“ μƒνΈμ΄μ©μ„±κ³Ό μ„±λ¥ ν–¥μƒμ„ μ„ν• κ¶κ³ μ‚¬ν•­


### 1. μµμ† μ§€μ› μΈν„°νμ΄μ¤

- ν΄λΌμ΄μ–ΈνΈ: **KVP μ™€ RESTful μΈν„°νμ΄μ¤ λ¨λ‘ μ§€μ›Β κ¶μ¥** (SOAP μ„ νƒ)
- μ„λ²„: **KVPΒ λλ” RESTful μ¤‘ μµμ†Β ν•λ‚ μ΄μƒ μ§€μ›** (SOAP μ„ νƒ)


### 2. ν‘μ¤€ μ¤μΌ€μΌ μ„ΈνΈ

- Layer κ°€ Well known scale sets μ‚¬μ©ν•κ³ , TileMatrixSet μ„Ήμ…μ—Β λ…μ‹ν•λ”κ±Έ κ°•λ ¥ν κ¶μ¥
- μ‹μ¤ν… κ°„ μƒνΈμ΄μ©μ„± ν–¥μƒ λ° μ„λΉ„μ¤ κ²°ν•©(mash-up) μ©μ΄


### 3. ν‘μ¤€ μ΄λ―Έμ§€ ν•μ‹ λ° FeatureInfo

- μ„λ²„λ” λ‘κ°€μ§€ ν•μ‹μΌλ΅ νƒ€μΌ μ κ³µ
	- image/png: λ²”μ£Όν• μ§€λ„μ© (ν¬λ…λ„ μ§€μ›)
	- image/jpeg: μ΄λ―Έμ§€ κΈ°λ° μ§€λ„μ©
- ν΄λΌμ΄μ–ΈνΈλ” λ‘κ°€μ§€ λ¨λ‘ μ§€μ›ν•κ³ , ν¬λ… νƒ€μΌ μ¤‘μ²© ν‘ν„ κΈ°λ¥ ν•„μ”

- FeatureInfo λ” `application/gml+xml; version=3.1`Β ν•μ‹ κ¶μ¥


### 4. TileMatrixSetκ³Ό TileMatrixSetLimitsμ μ

- μ μ‚¬ν• μμ—­μΒ λ μ΄μ–΄λ“¤μ€ λ™μΌν• TileMatrixSetΒ μ‚¬μ© κ¶μ¥
- TileMatrixSetLimitsλ΅Β μ‚¬μ© κ°€λ¥ν• νƒ€μΌΒ μΈλ±μ¤ μ •λ³΄ μ κ³µ


### 5. μΊμ‹ μ§€μ›

- **λ¦¬μ†μ¤κ°€ μΊμ‹ κ°€λ¥ν•¨μ„ λ…ν™•ν ν‘μ‹**
	- **HTTP 1.0**: `Expires` ν—¤λ” μ‚¬μ©
	- **HTTP 1.1**: `Cache-Control` ν—¤λ” μ‚¬μ©

- νμΌ κΈ°λ° μ„λ²„μ—μ„ νƒ€μΌμ΄ λ―Έλ¦¬ λ λ”λ§λμ–΄ λ””λ ‰ν† λ¦¬μ— μ €μ¥λλ” κ²½μ° λ””λ ‰ν† λ¦¬ λ§λ£μΌ μ„¤μ •Β κ°€λ¥